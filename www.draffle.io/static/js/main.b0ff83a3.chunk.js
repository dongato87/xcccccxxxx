(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{102:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=!1,r=5e3},103:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s}));var a=n(25),r="dRafA7ymQiLKjR5dmmdZC9RPX4EQUjqYFB3mWokRuDs",i=new a.c("B2jCF3V3hCCPcwsXPtjMhXVjzafXU68EMJWz3eKZ2kVa"),c=a.b.fromSecretKey(new Uint8Array(JSON.parse("[113,246,58,68,183,214,165,226,130,213,55,129,156,201,172,105,111,136,155,207,144,229,30,38,74,227,178,43,236,162,23,240,100,81,218,27,7,195,198,164,28,100,47,51,189,51,38,157,184,2,142,202,178,230,107,50,138,56,189,81,109,139,156,145]"))),s=c.publicKey},158:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d}));var a=n(14),r=n(54),i=n(102),c=n(103),s=i.b?["2zcTAzzHmvVPWjpFL5PnHhF6yutr5VXq61xueshhPwnU"]:["86f5xSDrue8Zz4QfuMErURN3o393L72zA1J2WRsYeTGB"],o=r.f.publicKey.findProgramAddressSync([e.from("vault_token_in"),c.b.toBytes()],c.a),l=Object(a.a)(o,1)[0];console.log("VAULT_TOKEN_IN: ".concat(l.toBase58()));var u=r.f.publicKey.findProgramAddressSync([e.from("vault_token_out"),c.b.toBytes()],c.a),d=Object(a.a)(u,1)[0];console.log("VAULT_TOKEN_OUT = ".concat(d.toBase58()))}).call(this,n(9).Buffer)},197:function(e,t,n){"use strict";n(2);var a=n(40),r=n(111),i=n(59),c=n(750),s=Object(c.a)((function(e){return{walletConnectButton:{width:"100%",backgroundColor:"transparent",borderColor:e.palette.common.white,boxShadow:"0 0 5px 2px #e86bff, inset 0 0 10px 0px #e86bff",color:e.palette.common.white,"&:hover":{backgroundColor:Object(i.a)(e.palette.primary.main,.2),borderColor:e.palette.common.white}},walletDisconnectButton:{width:"100%",backgroundColor:"transparent",borderColor:e.palette.common.white,boxShadow:"0 0 5px 2px ".concat(e.palette.secondary.main,", inset 0 0 10px 0px ").concat(e.palette.secondary.main),color:e.palette.common.white,"&:hover":{backgroundColor:Object(i.a)(e.palette.secondary.main,.2),borderColor:e.palette.common.white}}}})),o=n(4);t.a=function(){var e=s(),t=Object(a.e)().connected;return Object(o.jsx)(r.b,{variant:"outlined",color:"secondary",className:t?e.walletDisconnectButton:e.walletConnectButton})}},225:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return O})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return y}));var a=n(15),r=n(17),i=n(1),c=n.n(i),s=n(14),o=n(5),l=n(54),u=n(140),d=n(29),p=n(25),f=n(92),m=n(66),j=n(350),b=n(351),h=function(){var t=Object(o.a)(c.a.mark((function t(n,a,r){var i,o,l,d,m,j,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.c.findProgramAddress([n.toBytes(),e.from("proceeds")],a.programId);case 2:return i=t.sent,o=Object(s.a)(i,1),l=o[0],t.next=7,r.getAccountInfo(l);case 7:if(d=t.sent){t.next=10;break}throw Error("Failed to fetch proceeds account");case 10:if(m=Object(u.parseTokenAccount)(d.data),j=f.b.get(m.mint.toString())){t.next=14;break}throw Error("Info not found for proceeds account mint ".concat(m.mint.toString()));case 14:return b={name:j.name,publicKey:m.mint,logoUrl:j.logoURI,symbol:j.symbol,decimals:j.decimals},t.abrupt("return",{address:l,mintInfo:b});case 16:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),x=function(){var t=Object(o.a)(c.a.mark((function t(n,a,r){var i,o,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.c.findProgramAddress([n.toBuffer(),e.from("prize"),new d.u64(a).toArrayLike(e,"le",4)],r);case 2:return i=t.sent,o=Object(s.a)(i,1),l=o[0],t.abrupt("return",l);case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),O=function(){var e=Object(o.a)(c.a.mark((function e(t,n,i){var o,l,d,p,f,m,b,h,O,v,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.next=3,Promise.all(Object(r.a)(Array(i).keys()).map((function(e){return x(t,e,n.programId)})));case 3:return l=e.sent,e.next=6,n.provider.connection.getMultipleAccountsInfo(l);case 6:return d=e.sent,p=d.map((function(e){if(!e)throw new Error("Invalid prize account");return Object(u.parseTokenAccount)(e.data)})),e.next=10,Promise.all(p.map((function(e){return Object(j.a)(e.mint)})));case 10:return f=e.sent,e.next=13,n.provider.connection.getMultipleAccountsInfo(f);case 13:m=e.sent,b=Object(a.a)(p.entries()),e.prev=15,b.s();case 17:if((h=b.n()).done){e.next=26;break}return O=Object(s.a)(h.value,2),v=O[0],y=O[1],e.t0=o,e.next=22,g(l[v],y,m[v]);case 22:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 24:e.next=17;break;case 26:e.next=31;break;case 28:e.prev=28,e.t2=e.catch(15),b.e(e.t2);case 31:return e.prev=31,b.f(),e.finish(31);case 34:return e.abrupt("return",o);case 35:case"end":return e.stop()}}),e,null,[[15,28,31,34]])})));return function(t,n,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(c.a.mark((function e(t,n,a){var r,i,s,o,l,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=f.b.get(n.mint.toString()))){e.next=8;break}return o="".concat(Object(m.d)(n.amount,i)," ").concat(i.symbol),l=null===i||void 0===i||null===(s=i.extensions)||void 0===s?void 0:s.imageURI,r={name:o,publicKey:n.mint,logoUrl:i.logoURI,symbol:i.symbol,decimals:i.decimals},e.abrupt("return",{address:t,mint:r,amount:n.amount,type:b.a.FT,meta:{imageUri:l||i.logoURI}});case 8:if(!a){e.next=14;break}return e.next=11,Object(j.b)(a);case 11:e.t0=e.sent,e.next=15;break;case 14:e.t0=void 0;case 15:return u=e.t0,d=f.a,r={name:(null===u||void 0===u?void 0:u.name)||d.name,publicKey:n.mint,logoUrl:(null===u||void 0===u?void 0:u.image)||d.logoURI,symbol:d.symbol,decimals:d.decimals},e.abrupt("return",{address:t,mint:r,amount:n.amount,type:b.a.NFTPicture,meta:{name:(null===u||void 0===u?void 0:u.name)||d.name,imageUri:(null===u||void 0===u?void 0:u.image)||d.name}});case 19:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),v=function(e){return e.entrants.slice(0,e.total).reduce((function(e,t,n){return e.has(t.toString())?e.get(t.toString()).tickets.push(n):e.set(t.toString(),{publicKey:t,tickets:[n]}),e}),new Map)},y=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.provider.connection.getProgramAccounts(t.programId);case 2:return n=e.sent,a=l.a.accountDiscriminator("Raffle"),r=l.a.accountDiscriminator("Entrants"),i=[],s=[],n.forEach((function(e){var n=e.pubkey,c=e.account,o=c.data.slice(0,8);0===a.compare(o)?i.push({publicKey:n,account:t.coder.accounts.decode("Raffle",c.data)}):0===r.compare(o)?s.push({publicKey:n,account:t.coder.accounts.decode("Entrants",c.data)}):console.log("Could not decode ".concat(n.toBase58()))})),e.abrupt("return",[i,s]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}).call(this,n(9).Buffer)},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=new(n(25).c)("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s")},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var a,r=n(14),i=n(2),c=n.n(i),s=n(4);!function(e){e[e.Phone=0]="Phone",e[e.Tablet=1]="Tablet",e[e.Desktop=2]="Desktop"}(a||(a={}));var o=c.a.createContext();t.c=function(e){var t=e.children,n=c.a.useState(a.Desktop),i=Object(r.a)(n,2),l=i[0],u=i[1];return c.a.useEffect((function(){var e=function(){window.innerWidth<600&&l!==a.Phone?u(a.Phone):window.innerWidth<768&&l!==a.Tablet?u(a.Tablet):window.innerWidth>=768&&l!==a.Desktop&&u(a.Desktop)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(s.jsx)(o.Provider,{value:{device:l},children:t})}},350:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return C}));var a=n(1),r=n.n(a),i=n(5),c=n(11),s=n(10),o=n(226),l=n(47),u=n(25),d=n(471);Object(d.a)();var p,f,m="metadata",j="edition";!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.MetadataV1=4]="MetadataV1",e[e.EditionV1=1]="EditionV1",e[e.MasterEditionV1=2]="MasterEditionV1",e[e.MasterEditionV2=6]="MasterEditionV2",e[e.EditionMarker=7]="EditionMarker"}(p||(p={})),function(e){e.Audio="audio",e.Video="video",e.Image="image",e.VR="vr"}(f||(f={}));var b=function(){function e(t){Object(s.a)(this,e),this.key=void 0,this.ledger=void 0,this.key=p.EditionMarker,this.ledger=t.ledger}return Object(c.a)(e,[{key:"editionTaken",value:function(e){var t=e%248,n=Math.floor(t/8);if(n>30)throw Error("bad index for edition");var a=7-t%8,r=Math.pow(2,a);return 0!==(this.ledger[n]&r)}}]),e}(),h=function e(t){Object(s.a)(this,e),this.address=void 0,this.verified=void 0,this.share=void 0,this.address=t.address,this.verified=t.verified,this.share=t.share},x=function e(t){Object(s.a)(this,e),this.name=void 0,this.symbol=void 0,this.uri=void 0,this.sellerFeeBasisPoints=void 0,this.creators=void 0,this.name=t.name,this.symbol=t.symbol,this.uri=t.uri,this.sellerFeeBasisPoints=t.sellerFeeBasisPoints,this.creators=t.creators},O=function(){function e(t){Object(s.a)(this,e),this.key=void 0,this.updateAuthority=void 0,this.mint=void 0,this.data=void 0,this.primarySaleHappened=void 0,this.isMutable=void 0,this.editionNonce=void 0,this.masterEdition=void 0,this.edition=void 0,this.key=p.MetadataV1,this.updateAuthority=t.updateAuthority,this.mint=t.mint,this.data=t.data,this.primarySaleHappened=t.primarySaleHappened,this.isMutable=t.isMutable,this.editionNonce=t.editionNonce}return Object(c.a)(e,[{key:"init",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(this.mint);case 2:t=e.sent,this.edition=t,this.masterEdition=t;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),g=new Map([[function e(t){Object(s.a)(this,e),this.instruction=0,this.data=void 0,this.isMutable=void 0,this.data=t.data,this.isMutable=t.isMutable},{kind:"struct",fields:[["instruction","u8"],["data",x],["isMutable","u8"]]}],[function e(t){Object(s.a)(this,e),this.instruction=1,this.data=void 0,this.updateAuthority=void 0,this.primarySaleHappened=void 0,this.data=t.data?t.data:null,this.updateAuthority=t.updateAuthority?t.updateAuthority:null,this.primarySaleHappened=t.primarySaleHappened},{kind:"struct",fields:[["instruction","u8"],["data",{kind:"option",type:x}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}]]}],[function e(t){Object(s.a)(this,e),this.instruction=10,this.maxSupply=void 0,this.maxSupply=t.maxSupply},{kind:"struct",fields:[["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]}],[function e(t){Object(s.a)(this,e),this.instruction=9,this.supply=void 0,this.supply=t.supply},{kind:"struct",fields:[["instruction","u8"],["supply","u64"]]}],[function e(t){Object(s.a)(this,e),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.printingMint=void 0,this.oneTimePrintingAuthorizationMint=void 0,this.key=p.MasterEditionV1,this.supply=t.supply,this.maxSupply=t.maxSupply,this.printingMint=t.printingMint,this.oneTimePrintingAuthorizationMint=t.oneTimePrintingAuthorizationMint},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}],["printingMint","pubkeyAsString"],["oneTimePrintingAuthorizationMint","pubkeyAsString"]]}],[function e(t){Object(s.a)(this,e),this.key=void 0,this.supply=void 0,this.maxSupply=void 0,this.key=p.MasterEditionV2,this.supply=t.supply,this.maxSupply=t.maxSupply},{kind:"struct",fields:[["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}]]}],[function e(t){Object(s.a)(this,e),this.key=void 0,this.parent=void 0,this.edition=void 0,this.key=p.EditionV1,this.parent=t.parent,this.edition=t.edition},{kind:"struct",fields:[["key","u8"],["parent","pubkeyAsString"],["edition","u64"]]}],[x,{kind:"struct",fields:[["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[h]}]]}],[h,{kind:"struct",fields:[["address","pubkeyAsString"],["verified","u8"],["share","u8"]]}],[O,{kind:"struct",fields:[["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",x],["primarySaleHappened","u8"],["isMutable","u8"]]}],[b,{kind:"struct",fields:[["key","u8"],["ledger",[31]]]}]]),v=new RegExp("\0","g"),y=function(e){var t=Object(l.deserializeUnchecked)(g,O,e);return t.data.name=t.data.name.replace(v,""),t.data.uri=t.data.uri.replace(v,""),t.data.symbol=t.data.symbol.replace(v,""),t};function w(e){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.findProgramAddress([e.from(m),o.a.toBuffer(),new u.c(n).toBuffer(),e.from(j)],o.a);case 2:return t.abrupt("return",t.sent[0].toBase58());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(e){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.findProgramAddress([e.from(m),o.a.toBuffer(),n.toBuffer()],o.a);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(e){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(r.a.mark((function e(t){var n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y(t.data),e.prev=1,e.next=4,fetch(n.data.uri);case 4:return a=e.sent,e.next=7,a.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}}).call(this,n(9).Buffer)},351:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.FT="FT",e.NFTPicture="NFTPicture"}(a||(a={}))},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a="/admin_panel",r={HOME:"/",RAFFLES:"/raffles",STAKE:"/stake",TOOLS:{HOME:"/tools",CLOSE_TA:"/tools/close-token-accounts",CLOSE_SA:"/tools/close-serum-accounts"},ADMIN:{HOME:"".concat(a,"/"),RAFFLES:"".concat(a,"/raffles")}}},469:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"draffle","instructions":[{"name":"createRaffle","accounts":[{"name":"raffle","isMut":true,"isSigner":false},{"name":"entrants","isMut":true,"isSigner":false},{"name":"creator","isMut":true,"isSigner":true},{"name":"proceeds","isMut":true,"isSigner":false},{"name":"proceedsMint","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"endTimestamp","type":"i64"},{"name":"ticketPrice","type":"u64"},{"name":"maxEntrants","type":"u32"}]},{"name":"addPrize","accounts":[{"name":"raffle","isMut":true,"isSigner":false},{"name":"creator","isMut":true,"isSigner":true},{"name":"from","isMut":true,"isSigner":false},{"name":"prize","isMut":true,"isSigner":false},{"name":"prizeMint","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"prizeIndex","type":"u32"},{"name":"amount","type":"u64"}]},{"name":"buyTickets","accounts":[{"name":"raffle","isMut":false,"isSigner":false},{"name":"entrants","isMut":true,"isSigner":false},{"name":"proceeds","isMut":true,"isSigner":false},{"name":"buyerTokenAccount","isMut":true,"isSigner":false},{"name":"buyerTransferAuthority","isMut":false,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u32"}]},{"name":"revealWinners","accounts":[{"name":"raffle","isMut":true,"isSigner":false},{"name":"recentBlockhashes","isMut":false,"isSigner":false}],"args":[]},{"name":"claimPrize","accounts":[{"name":"raffle","isMut":true,"isSigner":false},{"name":"entrants","isMut":false,"isSigner":false},{"name":"prize","isMut":true,"isSigner":false},{"name":"winnerTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"prizeIndex","type":"u32"},{"name":"ticketIndex","type":"u32"}]},{"name":"collectProceeds","accounts":[{"name":"raffle","isMut":false,"isSigner":false},{"name":"proceeds","isMut":true,"isSigner":false},{"name":"creator","isMut":false,"isSigner":true},{"name":"creatorProceeds","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"closeEntrants","accounts":[{"name":"raffle","isMut":false,"isSigner":false},{"name":"entrants","isMut":true,"isSigner":false},{"name":"creator","isMut":false,"isSigner":true}],"args":[]}],"accounts":[{"name":"Raffle","type":{"kind":"struct","fields":[{"name":"creator","type":"publicKey"},{"name":"totalPrizes","type":"u32"},{"name":"claimedPrizes","type":"u32"},{"name":"randomness","type":{"option":{"array":["u8",32]}}},{"name":"endTimestamp","type":"i64"},{"name":"ticketPrice","type":"u64"},{"name":"entrants","type":"publicKey"}]}},{"name":"Entrants","type":{"kind":"struct","fields":[{"name":"total","type":"u32"},{"name":"max","type":"u32"},{"name":"entrants","type":{"array":["publicKey",5000]}}]}}],"errors":[{"code":6000,"name":"MaxEntrantsTooLarge","msg":"Max entrants is too large"},{"code":6001,"name":"RaffleEnded","msg":"Raffle has ended"},{"code":6002,"name":"InvalidPrizeIndex","msg":"Invalid prize index"},{"code":6003,"name":"NoPrize","msg":"No prize"},{"code":6004,"name":"InvalidCalculation","msg":"Invalid calculation"},{"code":6005,"name":"NotEnoughTicketsLeft","msg":"Not enough tickets left"},{"code":6006,"name":"RaffleStillRunning","msg":"Raffle is still running"},{"code":6007,"name":"WinnersAlreadyDrawn","msg":"Winner already drawn"},{"code":6008,"name":"WinnerNotDrawn","msg":"Winner not drawn"},{"code":6009,"name":"InvalidRevealedData","msg":"Invalid revealed data"},{"code":6010,"name":"TokenAccountNotOwnedByWinner","msg":"Ticket account not owned by winner"},{"code":6011,"name":"TicketHasNotWon","msg":"Ticket has not won"},{"code":6012,"name":"UnclaimedPrizes","msg":"Unclaimed prizes"},{"code":6013,"name":"InvalidRecentBlockhashes","msg":"Invalid recent blockhashes"}]}')},470:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"dispenser","instructions":[{"name":"createRegistry","accounts":[{"name":"registry","isMut":true,"isSigner":true},{"name":"vaultTokenIn","isMut":true,"isSigner":false},{"name":"vaultTokenOut","isMut":true,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"mintTokenIn","isMut":false,"isSigner":false},{"name":"mintTokenOut","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"rateTokenIn","type":"u64"},{"name":"rateTokenOut","type":"u64"}]},{"name":"updateRegistry","accounts":[{"name":"registry","isMut":true,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true}],"args":[{"name":"rateTokenIn","type":"u64"},{"name":"rateTokenOut","type":"u64"}]},{"name":"swap","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"swapper","isMut":false,"isSigner":true},{"name":"vaultTokenIn","isMut":true,"isSigner":false},{"name":"vaultTokenOut","isMut":true,"isSigner":false},{"name":"buyerTokenInAccount","isMut":true,"isSigner":false},{"name":"buyerTokenOutAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amountRequested","type":"u64"}]},{"name":"collectProceeds","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true},{"name":"vaultTokenIn","isMut":true,"isSigner":false},{"name":"adminProceedsAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"collectReserve","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"vaultTokenOut","isMut":true,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true},{"name":"adminReserveAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"Registry","type":{"kind":"struct","fields":[{"name":"admin","type":"publicKey"},{"name":"vaultTokenIn","type":"publicKey"},{"name":"vaultTokenOut","type":"publicKey"},{"name":"rateTokenIn","type":"u64"},{"name":"rateTokenOut","type":"u64"},{"name":"mintTokenIn","type":"publicKey"},{"name":"mintTokenOut","type":"publicKey"}]}}],"errors":[{"code":6000,"name":"InsufficientUserFunds","msg":"Insufficient user funds"},{"code":6001,"name":"InsufficientVaultFunds","msg":"Insufficient vault funds"},{"code":6002,"name":"InvalidCalculation","msg":"Invalid calculation"}]}')},471:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(25),r=n(47),i=n(19),c=n.n(i),s=function(){r.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new a.c(e)},r.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},r.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return c.a.encode(e)},r.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(c.a.decode(e))}}},479:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var a=n(87),r=n.n(a),i=n(65);function c(t,n){var a=i.keccak_256.create();return a.update(new Uint8Array(t)),a.update(new r.a(n).toArrayLike(e,"le",4)),new r.a(a.digest().slice(0,4),"le").toNumber()}}).call(this,n(9).Buffer)},480:function(e,t,n){"use strict";(function(e){var a=n(1),r=n.n(a),i=n(5),c=n(17),s=n(14),o=n(2),l=n(492),u=n(758),d=n(752),p=n(495),f=n(756),m=n(493),j=n(760),b=n(496),h=n(229),x=n(40),O=n(74),g=n(86),v=n(25),y=n(54),w=n(481),k=n(29),S=n(66),N=n(58),C=n(360),T=n(92),M=n(482),I=n(4),P=new v.c("NNpzg8oFqYxeXWwPwJrJWRBizJ33AeqmpjGwVeaM6yg"),A=v.b.fromSecretKey(new Uint8Array(JSON.parse("[35,47,18,50,28,119,80,186,159,159,145,243,214,163,99,71,228,6,163,152,124,159,91,101,153,69,149,48,78,9,205,113,105,1,228,23,232,110,138,220,28,135,207,11,98,69,154,41,151,134,243,115,35,76,231,98,131,83,27,108,112,5,57,42]"))),R=A.publicKey,z=Number("173"),B=Number("86400"),E=y.f.publicKey.findProgramAddressSync([e.from("vault"),R.toBytes()],P),D=Object(s.a)(E,1)[0];console.log("vault address: ".concat(D.toBase58()));var K=Object(c.a)(T.b.values()).find((function(e){return"DCT"===e.symbol}));if(!K)throw new Error("Staking token not found");var L=new v.c(K.address);t.a=function(){var t,n,a=Object(M.a)(),c=Object(x.d)().connection,T=Object(x.c)(),E=Object(o.useState)(),F=Object(s.a)(E,2),W=F[0],G=F[1],U=Object(o.useState)(),_=Object(s.a)(U,2),V=_[0],H=_[1],Z=Object(o.useState)(""),X=Object(s.a)(Z,2),q=X[0],Y=X[1],J=Object(o.useState)(),Q=Object(s.a)(J,2),$=Q[0],ee=Q[1],te=Object(o.useMemo)((function(){return new y.c(w,P,Object(g.a)(c,T))}),[c,T]),ne=Object(o.useMemo)((function(){if(te.provider.wallet.publicKey){var t=y.f.publicKey.findProgramAddressSync([e.from("stake"),R.toBytes(),te.provider.wallet.publicKey.toBytes()],P);return Object(s.a)(t,1)[0]}}),[te.provider.wallet.publicKey]),ae=Object(o.useMemo)((function(){if(te.provider.wallet.publicKey){var e=Object(S.b)(te.provider.wallet.publicKey,L);return Object(s.a)(e,1)[0]}}),[te.provider.wallet.publicKey]);Object(o.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,te.account.stakeAccount.fetch(ne);case 5:t=e.sent,G(t),console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),G(void 0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}if(te.provider.wallet.publicKey){e();var n=setInterval(e,1e4);return function(){return clearInterval(n)}}G(void 0)}),[te,ne]),Object(o.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getSlot();case 2:return t=e.sent,e.t0=H,e.next=6,c.getBlockTime(t);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e();var n=setInterval(e,1e4);return function(){return clearInterval(n)}}),[c]),Object(o.useEffect)((function(){if(te.provider.wallet.publicKey){var e=setInterval((function(){t()}),5e3);return t(),function(){return clearInterval(e)}}function t(){return n.apply(this,arguments)}function n(){return(n=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ee,e.next=3,Object(S.c)(te.provider,L);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ee(void 0)}),[te.provider]);var re=Object(o.useMemo)((function(){if(W&&V){var e=W.rewardsEndTimestamp.gte(new y.b(V))?W.rewardsEndTimestamp.sub(new y.b(V)):new y.b(0),t=y.b.min(W.rewardsEndTimestamp,new y.b(V)).sub(W.rewardsStartTimestamp),n=t.mul(W.amount).mul(W.multiplier).mul(new y.b(z)).div(new y.b(1e8)),a=W.rewardsEndTimestamp.sub(W.rewardsStartTimestamp);return{remainingTime:e,pendingRewards:n,progress:a.isZero()?0:t.muln(100).div(a).toNumber()}}}),[W,V]);return Object(I.jsxs)(O.a,{children:[Object(I.jsxs)(l.a,{title:"Stake",children:[Object(I.jsx)(u.a,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",children:Object(I.jsx)(d.a,{component:"img",src:"/dRaffle-logo.png",className:a.media})}),(null===(t=te.provider.wallet)||void 0===t?void 0:t.publicKey)?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(p.a,{children:W?Object(I.jsxs)("div",{children:["You have"," ",Object(S.d)(W.amount,K)," ",K.symbol," staked, rewards are 15% of the staked amount per day",Object(I.jsx)("br",{}),"Pending rewards"," ",re?Object(S.d)(re.pendingRewards,K):"N/A"," ",K.symbol,Object(I.jsx)("br",{}),"Rewards end in"," ",re?Object(N.e)(re.remainingTime.toNumber()):"N/A",Object(I.jsx)("br",{}),"Until"," ",W.rewardsEndTimestamp.isZero()?"N/A":new Date(W.rewardsEndTimestamp.muln(1e3).toNumber()).toISOString(),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsx)(f.a,{variant:"determinate",value:(null===re||void 0===re?void 0:re.progress)||0,style:{height:"20px"}}),Object(I.jsx)("br",{}),"You have"," ",$?Object(S.d)($,K):"0"," ",K.symbol]}):"No stake account"}),Object(I.jsx)(m.a,{children:W?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(j.a,{type:"number",value:q,onChange:function(e){var t=e.target;Y(t.value)},placeholder:"0",InputProps:{endAdornment:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(b.a,{position:"end",children:Object(I.jsx)(h.a,{disabled:!$,onClick:function(){$&&Y(Object(S.d)($,K))},children:"MAX"})}),Object(I.jsx)(b.a,{position:"end",children:K.symbol})]}),inputProps:{step:.1}}}),Object(I.jsx)(h.a,{onClick:Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne&&ae){e.next=2;break}return e.abrupt("return");case 2:return t=q?new y.b(C.a(q).mul(C.a(10).pow(K.decimals)).toString()):new y.b(0),e.next=5,Object(g.b)((function(){return te.rpc.stake(t,{accounts:{registry:R,vault:D,staker:te.provider.wallet.publicKey,stakerTokenAccount:ae,stakeAccount:ne,tokenProgram:k.TOKEN_PROGRAM_ID}})}),"Staked!");case 5:Y("");case 6:case"end":return e.stop()}}),e)}))),children:"Stake"}),Object(I.jsx)(h.a,{disabled:!W||W.amount.isZero(),onClick:Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne&&ae){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(g.b)(Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te.rpc.unstake({accounts:{registry:R,vault:D,staker:te.provider.wallet.publicKey,stakerTokenAccount:ae,stakeAccount:ne,tokenProgram:k.TOKEN_PROGRAM_ID},instructions:$?void 0:[Object(S.a)(L,ae,te.provider.wallet.publicKey)]}));case 1:case"end":return e.stop()}}),e)}))),"Unstaked!");case 4:case"end":return e.stop()}}),e)}))),children:"Unstake"})]}):Object(I.jsx)(h.a,{onClick:Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(g.b)((function(){return te.rpc.createStakeAccount({accounts:{registry:R,staker:te.provider.wallet.publicKey,stakeAccount:ne,systemProgram:v.f.programId}})}),"Stake account created");case 4:case"end":return e.stop()}}),e)}))),children:"Create stake account"})})]}):Object(I.jsx)(p.a,{children:"Connect wallet to start staking"})]}),Object(I.jsx)("br",{}),["86f5xSDrue8Zz4QfuMErURN3o393L72zA1J2WRsYeTGB","2zcTAzzHmvVPWjpFL5PnHhF6yutr5VXq61xueshhPwnU"].includes(null===(n=te.provider.wallet.publicKey)||void 0===n?void 0:n.toBase58())&&Object(I.jsx)(l.a,{title:"Admin",children:Object(I.jsx)(m.a,{children:Object(I.jsx)(h.a,{onClick:Object(i.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new y.b(B),n=new y.b(z),e.next=4,te.rpc.createRegistry(t,n,{accounts:{registry:R,vault:D,mint:L,admin:te.provider.wallet.publicKey,tokenProgram:k.TOKEN_PROGRAM_ID,systemProgram:v.f.programId,rent:v.e},signers:[A]});case 4:a=e.sent,console.log(a);case 6:case"end":return e.stop()}}),e)}))),children:"Create registry"})})})]})}}).call(this,n(9).Buffer)},481:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"community_staking","instructions":[{"name":"createRegistry","accounts":[{"name":"registry","isMut":true,"isSigner":true},{"name":"vault","isMut":true,"isSigner":false},{"name":"mint","isMut":false,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false}],"args":[{"name":"rewardPeriod","type":"i64"},{"name":"rewardRateNumerator","type":"u64"}]},{"name":"updateRegistry","accounts":[{"name":"registry","isMut":true,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true}],"args":[{"name":"rewardPeriod","type":"i64"},{"name":"rewardRateNumerator","type":"u64"}]},{"name":"assignController","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"controller","isMut":false,"isSigner":false},{"name":"controllerRecord","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"updateController","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"controller","isMut":false,"isSigner":false},{"name":"controllerRecord","isMut":true,"isSigner":false}],"args":[{"name":"enabled","type":{"option":"bool"}},{"name":"maxMultiplier","type":{"option":"u64"}}]},{"name":"control","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true},{"name":"controllerRecord","isMut":false,"isSigner":false},{"name":"stakeAccount","isMut":true,"isSigner":false}],"args":[{"name":"multiplier","type":"u64"}]},{"name":"createStakeAccount","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"staker","isMut":true,"isSigner":true},{"name":"stakeAccount","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"stake","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"vault","isMut":true,"isSigner":false},{"name":"staker","isMut":false,"isSigner":true},{"name":"stakerTokenAccount","isMut":true,"isSigner":false},{"name":"stakeAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"unstake","accounts":[{"name":"registry","isMut":false,"isSigner":false},{"name":"vault","isMut":true,"isSigner":false},{"name":"staker","isMut":true,"isSigner":true},{"name":"stakerTokenAccount","isMut":true,"isSigner":false},{"name":"stakeAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"Registry","type":{"kind":"struct","fields":[{"name":"vault","type":"publicKey"},{"name":"admin","type":"publicKey"},{"name":"rewardPeriod","type":"i64"},{"name":"rewardRateNumerator","type":"u64"},{"name":"rewardRateDenominator","type":"u64"}]}},{"name":"ControllerRecord","type":{"kind":"struct","fields":[{"name":"enabled","type":"bool"},{"name":"maxMultiplier","type":"u64"}]}},{"name":"StakeAccount","type":{"kind":"struct","fields":[{"name":"registry","type":"publicKey"},{"name":"amount","type":"u64"},{"name":"rewardsStartTimestamp","type":"i64"},{"name":"rewardsEndTimestamp","type":"i64"},{"name":"multiplier","type":"u64"}]}}],"errors":[{"code":6000,"name":"AmountTooLarge","msg":"Amount too large"},{"code":6001,"name":"InvalidCalculation","msg":"Invalid calculation"},{"code":6002,"name":"InsufficientAmount","msg":"Insufficient amount"},{"code":6003,"name":"MultiplierTooLarge","msg":"Multiplier too large"},{"code":6004,"name":"ControllerDisabled","msg":"Controller is disabled"}]}')},482:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(750),r=Object(a.a)((function(e){return{media:{maxWidth:"200px",width:"100%"}}}))},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n(23),i=function(){var e=Object(a.useContext)(r.b);if(void 0===e)throw new Error("useViewport must be used within an ViewportContext");return e}},513:function(e,t,n){},514:function(e,t){},516:function(e,t){},536:function(e,t){},537:function(e,t){},556:function(e,t){},557:function(e,t){},561:function(e,t){},562:function(e,t){},569:function(e,t){},571:function(e,t){},577:function(e,t){},58:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return s}));n(17),n(29);var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toString(),a=n.length;return"".concat(n.substr(0,t),"...").concat(n.substr(a-t,a))};var r=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i=function(e,t){var n=t.getTime()-e.getTime();return n<0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(n/864e5),hours:Math.floor(n%864e5/36e5),minutes:Math.floor(n%36e5/6e4),seconds:Math.floor(n%6e4/1e3)}},c=function(e){return new Promise((function(t){return setTimeout(t,e)}))},s=function(e){return[Math.floor(e/3600),Math.floor(e/60)%60,e%60].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")}},590:function(e,t){},594:function(e,t,n){},595:function(e,t){},596:function(e,t){},602:function(e,t){},644:function(e,t){},646:function(e,t){},66:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var a=n(1),r=n.n(a),i=n(5),c=n(54),s=n(140),o=n(29),l=n(360),u=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wallet.publicKey){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.connection.getAccountInfo(t.wallet.publicKey);case 4:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.lamports);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Token.getAssociatedTokenAddress(o.ASSOCIATED_TOKEN_PROGRAM_ID,o.TOKEN_PROGRAM_ID,n,t.wallet.publicKey);case 2:return a=e.sent,e.prev=3,e.next=6,Object(s.getTokenAccount)(t,a);case 6:return i=e.sent,e.abrupt("return",i.amount);case 10:return e.prev=10,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(e,t){return l.a(e.toString()).div(Math.pow(10,t.decimals)).toString()},f=function(e,t){return c.f.publicKey.findProgramAddressSync([e.toBuffer(),o.TOKEN_PROGRAM_ID.toBuffer(),t.toBuffer()],o.ASSOCIATED_TOKEN_PROGRAM_ID)},m=function(e,t,n){return o.Token.createAssociatedTokenAccountInstruction(o.ASSOCIATED_TOKEN_PROGRAM_ID,o.TOKEN_PROGRAM_ID,e,t,n,n)}},660:function(e,t){},664:function(e,t){},666:function(e,t){},676:function(e,t){},678:function(e,t){},705:function(e,t){},707:function(e,t){},712:function(e,t){},714:function(e,t){},721:function(e,t){},733:function(e,t){},736:function(e,t){},74:function(e,t,n){"use strict";var a=n(2),r=n(750),i=Object(r.a)((function(e){return{background:{width:"100vw",height:"100vh",background:"linear-gradient(0deg, rgba(57,9,74,1) 0%, rgba(6,18,98,1) 100%, rgba(57,9,74,1) 100%);",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",position:"fixed"},content:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column"}}})),c=n(4),s=function(e){var t=e.children,n=i();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:n.background}),Object(c.jsx)("div",{className:n.content,children:t})]})},o=n(792),l=n(758),u=n(49),d=n(23),p=Object(r.a)((function(e){return{root:function(e){return{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:e.device===d.a.Phone?"20px":"50px"}}}})),f=function(e){var t=e.children,n=Object(u.a)().device,a=p({device:n});return Object(c.jsx)(o.a,{style:{width:"90%",padding:"0 10px",display:" flex",alignItems:"center"},children:Object(c.jsx)(l.a,{className:a.root,children:t})})},m=n(14),j=n(802),b=n(753),h=n(40),x=n(478),O=n.n(x),g=n(803),v=n(804),y=n(36),w=Object(r.a)((function(e){return{root:function(e){return{width:"100%",height:e.device===d.a.Phone?"50px":"90px"}},drawerHeader:function(){return{width:"100%",height:"50px",display:"flex",justifyContent:"space-between",padding:e.spacing(0,1)}},appBar:function(e){return{height:e.device===d.a.Phone?"50px":"90px",display:"flex",flexDirection:"row",justifyContent:"space-between",backgroundColor:"rgba(6,18,98,1)",alignItems:"center",boxShadow:"0 0 10px 0 #000",zIndex:99}},navContainer:{display:"flex",alignItems:"center",marginRight:"30px"},homeButton:function(){return{marginLeft:"30px",color:e.palette.primary.dark,"&:hover":{backgroundColor:"transparent"}}},navButtons:{marginLeft:"30px",color:e.palette.primary.main,"&:hover":{textShadow:"0px 0px 5px #e86bff",backgroundColor:"transparent"}},homeButtonIcon:{height:"60px",color:e.palette.primary.main},walletButtonContainer:{marginLeft:"20px"},currentLocation:{color:"black"}}})),k=n(46),S=n(1),N=n.n(S),C=n(5),T=n(826),M=n(793),I=n(84),P=n(29),A=n(25),R=new A.c("zRpVjG5wMWrNhpTtSiGMz9iBaMTQDdaVGCFLmYqCs4U"),z=A.b.fromSecretKey(new Uint8Array(JSON.parse("[176,202,21,107,185,15,32,195,91,2,31,70,159,233,241,62,76,236,172,214,237,161,228,132,4,5,195,210,178,190,32,26,105,116,198,160,2,226,39,220,101,49,48,188,170,63,246,200,128,23,196,152,152,138,219,87,93,94,143,68,138,42,40,144]"))),B=function(){var e=Object(C.a)(N.a.mark((function e(t,n){var a,r,i,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.Token.getAssociatedTokenAddress(P.ASSOCIATED_TOKEN_PROGRAM_ID,P.TOKEN_PROGRAM_ID,R,z.publicKey);case 2:return a=e.sent,e.next=5,P.Token.getAssociatedTokenAddress(P.ASSOCIATED_TOKEN_PROGRAM_ID,P.TOKEN_PROGRAM_ID,R,n);case 5:return r=e.sent,i=[],e.next=9,t.getAccountInfo(r);case 9:return null===e.sent&&i.push(P.Token.createAssociatedTokenAccountInstruction(P.ASSOCIATED_TOKEN_PROGRAM_ID,P.TOKEN_PROGRAM_ID,R,r,n,z.publicKey)),i.push(P.Token.createTransferInstruction(P.TOKEN_PROGRAM_ID,a,r,z.publicKey,[],3e6)),i.push(A.f.transfer({fromPubkey:z.publicKey,toPubkey:n,lamports:5e8})),(c=new A.g({feePayer:z.publicKey})).add.apply(c,i),e.next=17,t.sendTransaction(c,[z]);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(h.d)().connection,t=Object(h.e)().publicKey,n=Object(a.useState)(!1),r=Object(m.a)(n,2),i=r[0],s=r[1];return Object(c.jsx)(T.a,{title:"Aidrop for testing",children:Object(c.jsx)(b.a,{onClick:Object(C.a)(N.a.mark((function n(){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return s(!0),n.next=5,B(e,t);case 5:s(!1),I.b.success("Aidropped some SOL and some DT");case 7:case"end":return n.stop()}}),n)}))),disabled:i,children:Object(c.jsx)(M.a,{})})})},D=n(825),K=n(801),L=n(197),F=Object(r.a)((function(e){return{root:{width:"100%"},paper:{backgroundColor:"rgba(57,9,74,1)"},drawerHeader:{marginLeft:"10px",height:"50px",display:"flex",justifyContent:"flex-end",alignItems:"center",padding:e.spacing(0,1)},drawerContent:{width:"100vw",marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},walletButtonContainer:{width:"76%",maxWidth:"245px",display:"flex",justifyContent:"center"},navButtonsContainer:{width:"100%",marginTop:"30px",display:"flex",flexDirection:"column",justifyContent:"center"}}})),W=n(13),G=n(75),U=n(229),_=n(59),V=Object(r.a)((function(e){return{navButtons:function(t){return{fontSize:"16px",color:t.isCurrent?Object(_.b)(e.palette.secondary.main,.1):e.palette.primary.main,"&:hover":{textShadow:"0px 0px 5px #e86bff",backgroundColor:"transparent"}}}}})),H=function(e){var t=e.label,n=e.target,a=e.onClick,r=e.size,i=e.isCurrent,s=void 0!==i&&i,o=e.className,l=Object(G.a)(e,["label","target","onClick","size","isCurrent","className"]),u=V({isCurrent:s}),d=Object(y.f)().push;return Object(c.jsx)(U.a,Object(W.a)(Object(W.a)({onClick:function(e){d(n),a&&a(e)},variant:"text",disableRipple:!0,size:r,className:"".concat(u.navButtons," ").concat(o)},l),{},{children:t}))},Z=n(158),X=function(e){return e&&Z.a.includes(e.toBase58())},q=function(e){var t=e.wallet,n=e.isOpen,a=e.setIsOpen,r=e.navLinksList,i=F(),s=Object(y.g)().pathname;return Object(c.jsxs)(D.a,{anchor:"left",className:i.root,classes:{paper:i.paper},open:n,onClose:function(){return a(!1)},onOpen:function(){return a(!0)},children:[Object(c.jsx)("div",{className:i.drawerHeader,children:Object(c.jsx)(b.a,{size:"medium",onClick:function(){return a(!1)},children:Object(c.jsx)(K.a,{})})}),Object(c.jsxs)("div",{className:i.drawerContent,children:[Object(c.jsx)("div",{className:i.walletButtonContainer,children:Object(c.jsx)(L.a,{})}),Object(c.jsx)("div",{className:i.navButtonsContainer,children:r.filter((function(e){var n=e.admin;return!n||n&&X(t)})).map((function(e){return Object(c.jsx)(H,{label:e.label,target:e.target,onClick:function(){return a(!1)},isCurrent:e.target===s})}))})]})]})},Y=n(102),J=[{label:"Home",target:k.a.HOME},{label:"Explore",target:k.a.RAFFLES},{label:"Stake",target:k.a.STAKE},{label:"Tools",target:k.a.TOOLS.HOME},{label:"Admin Panel",target:k.a.ADMIN.HOME,admin:!0}],Q=function(e){var t=e.onBackNavigation,n=Object(u.a)().device,r=w({device:n}),i=Object(h.e)(),s=i.connected,o=i.publicKey,l=Object(y.f)(),p=l.push,f=l.location,x=Object(a.useState)(!1),S=Object(m.a)(x,2),N=S[0],C=S[1];return Object(c.jsxs)("div",{className:r.root,children:[Object(c.jsx)("div",{style:{width:"100%",height:n===d.a.Phone?"50px":"90px",background:"linear-gradient(0deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2))",backdropFilter:"blur(3px)",zIndex:98}}),Object(c.jsx)(j.a,{className:r.appBar,elevation:0,children:n===d.a.Phone?Object(c.jsxs)("div",{className:r.drawerHeader,children:[t?Object(c.jsx)(b.a,{size:"medium",onClick:function(){return t()},children:Object(c.jsx)(g.a,{})}):Object(c.jsx)(b.a,{size:"medium",onClick:function(){return p(k.a.HOME)},children:Object(c.jsx)(v.a,{})}),Object(c.jsx)(b.a,{size:"medium",onClick:function(){return C(!0)},children:Object(c.jsx)(O.a,{})}),Object(c.jsx)(q,{wallet:o,isOpen:N,setIsOpen:C,navLinksList:J})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{children:Object(c.jsx)(b.a,{onClick:function(){return p(k.a.HOME)},className:r.homeButton,children:Object(c.jsx)("img",{src:"/dRaffle-LC-banner.png",alt:"Site banner",className:r.homeButtonIcon})})}),Object(c.jsxs)("div",{className:r.navContainer,children:[J.filter((function(e){var t=e.admin;return!t||t&&X(o)})).map((function(e){var t=e.label,n=e.target;return Object(c.jsx)(H,{label:t,target:n,isCurrent:f.pathname===n,style:{marginRight:"20px"}},n)})),s&&Y.b&&Object(c.jsx)(E,{}),Object(c.jsx)("div",{className:r.walletButtonContainer,children:Object(c.jsx)(L.a,{})})]})]})})]})};t.a=function(e){var t=e.children,n=e.onBackNavigation;return Object(c.jsxs)(s,{children:[Object(c.jsx)(Q,{onBackNavigation:n}),Object(c.jsx)(f,{children:t})]})}},747:function(e,t){},748:function(e,t,n){},749:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),i=n(51),c=n.n(i),s=(n(513),n(822)),o=n(266),l=n(84),u=n(36),d=n(46),p=n(17),f=n(14),m=n(359),j=n(806),b=n(805),h=n(40),x=n(13),O=n(75),g=n(492),v=n(752),y=n(493),w=n(826),k=n(753),S=n(788),N=n(791),C=n(159),T=n.n(C),M=n(58),I=n(750),P=Object(I.a)((function(e){return{root:{display:"flex",flexDirection:"row",width:"100%",maxWidth:"900px",justifyContent:"space-between"}}})),A=n(4),R=function(e){var t=e.endTimestamp,n=e.spacing,r=void 0===n?"0px":n,i=e.className,c=Object(O.a)(e,["endTimestamp","spacing","className"]),s=P(),o=Object(a.useState)(new Date),l=Object(f.a)(o,2),u=l[0],d=l[1],p=Object(a.useState)(!1),m=Object(f.a)(p,2),j=m[0],b=m[1],h=Object(a.useMemo)((function(){return Object(M.b)(u,t)}),[u,t]),g=h.days,v=h.hours,y=h.minutes,w=h.seconds;return Object(a.useEffect)((function(){d(new Date);var e=setInterval((function(e){1e3*(new Date).getTime()-e>.2&&d(new Date)}),1e3,1e3*(new Date).getTime());return function(){return clearInterval(e)}}),[d]),j?Object(A.jsxs)("div",Object(x.a)(Object(x.a)({className:"".concat(s.root," ").concat(i)},c),{},{children:[Object(A.jsx)("span",{style:{marginRight:r},children:g}),":",Object(A.jsx)("span",{style:{marginRight:r,marginLeft:r},children:v.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}),":",Object(A.jsx)("span",{style:{marginRight:r,marginLeft:r},children:y.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}),":",Object(A.jsx)("span",{style:{marginLeft:r},children:w.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})})]})):Object(A.jsxs)("div",Object(x.a)(Object(x.a)({className:"".concat(s.root," ").concat(i)},c),{},{children:[Object(A.jsx)("div",{style:{marginRight:r},children:Object(A.jsx)(T.a,{start:0,end:g,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},children:function(e){var t=e.countUpRef;return Object(A.jsx)("span",{ref:t})}})}),":",Object(A.jsx)("div",{style:{marginRight:r,marginLeft:r},children:Object(A.jsx)(T.a,{start:0,end:v,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},formattingFn:function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},children:function(e){var t=e.countUpRef;return Object(A.jsx)("span",{ref:t})}})}),":",Object(A.jsx)("div",{style:{marginRight:r,marginLeft:r},children:Object(A.jsx)(T.a,{start:0,end:y,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},formattingFn:function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},children:function(e){var t=e.countUpRef;return Object(A.jsx)("span",{ref:t})}})}),":",Object(A.jsx)("div",{style:{marginLeft:r},children:Object(A.jsx)(T.a,{start:0,end:w,delay:0,duration:.8,preserveValue:!0,useEasing:!0,onEnd:function(){return b(!0)},formattingFn:function(e){return e.toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})},children:function(e){var t=e.countUpRef;return Object(A.jsx)("span",{ref:t})}})})]}))},z=n(66),B=Object(I.a)((function(e){return{root:function(e){e.device;return{height:"420px",width:"280px",position:"relative",cursor:"pointer","&:hover":{boxShadow:"0 3px 10px 0 #111",transform:"scale3d(1.02, 1.02, 1)"},"&:active":{transform:"scale3d(1, 1, 1)"}}},media:{height:"250px",minHeight:"250px"},raffleInfo:{display:"flex",flexDirection:"column",justifyContent:"center",fontSize:"18px",padding:"15px"},cardLabel:{fontSize:"15px"},detailsRow1:{color:e.palette.primary.main,fontWeight:"bold",textTransform:"uppercase",marginBottom:"10px"},detailsRow2:{color:e.palette.common.white,display:"flex",flexDirection:"row",width:"100%",marginBottom:"10px"},detailsRow3:{color:e.palette.common.white,display:"flex",flexDirection:"row",width:"100%"},label:{fontSize:"10px",color:"#777"},ticketsSold:{width:"50%"},endingIn:{width:"50%"},ticketPrice:{width:"80%"},goToRaffle:{color:"white","&:hover":{backgroundColor:"transparent"}},cardPrizesBadge:{fontSize:"12px",fontWeight:"bold",width:"80px",textAlign:"center",padding:"2px",position:"absolute",top:"5px",left:"5px",color:"black",backgroundColor:e.palette.secondary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"},cardEndedBadge:{fontSize:"12px",fontWeight:"bold",width:"50px",textAlign:"center",padding:"2px",position:"absolute",top:"5px",right:"5px",color:"white",backgroundColor:e.palette.primary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"}}})),E=n(49),D=function(e){var t=e.raffle,n=e.className,r=Object(O.a)(e,["raffle","className"]),i=Object(E.a)().device,c=B({device:i}),s=Object(u.f)().push,o=Object(a.useState)(!1),l=Object(f.a)(o,2),p=l[0],m=l[1],j=Object(a.useState)(!1),b=Object(f.a)(j,2),h=b[0],C=b[1];if(Object(a.useEffect)((function(){var e=setInterval((function(){return m(new Date<t.endTimestamp)}),1e3);return function(){return clearInterval(e)}}),[t,m]),0===t.prizes.length)return null;var T=t.prizes[0],M=t.metadata.overviewImageUri?t.metadata.overviewImageUri:T.meta.imageUri;return Object(A.jsxs)(g.a,Object(x.a)(Object(x.a)({onClick:function(){s("".concat(d.a.RAFFLES,"/").concat(t.publicKey))},className:"".concat(c.root," ").concat(n)},r),{},{children:[Object(A.jsxs)("div",{className:c.cardPrizesBadge,children:[t.prizes.length," prize",t.prizes.length>1&&"s"]}),new Date>t.endTimestamp&&Object(A.jsx)("div",{className:c.cardEndedBadge,children:"Ended"}),!h&&Object(A.jsx)(S.a,{variant:"rect",animation:"wave",classes:{root:c.media}}),Object(A.jsx)(v.a,{component:"img",className:c.media,src:M,alt:T.mint.name,style:h?{}:{display:"none"},onLoad:function(){return C(!0)}}),Object(A.jsxs)(y.a,{className:c.raffleInfo,children:[Object(A.jsx)("div",{className:c.detailsRow1,children:t.metadata.name.length>20?Object(A.jsx)(w.a,{title:t.metadata.name,placement:"top",children:Object(A.jsxs)("div",{children:[t.metadata.name.slice(0,16)," ..."]})}):t.metadata.name}),Object(A.jsxs)("div",{className:c.detailsRow2,children:[Object(A.jsxs)("div",{className:c.ticketsSold,children:[Object(A.jsx)("div",{className:c.label,children:Object(A.jsx)("span",{className:c.cardLabel,children:"Tickets sold"})}),t.totalTickets]}),Object(A.jsxs)("div",{className:c.endingIn,children:[Object(A.jsx)("div",{className:c.label,children:Object(A.jsx)("span",{className:c.cardLabel,children:"Ending in"})}),p?Object(A.jsx)(R,{endTimestamp:t.endTimestamp}):"-"]})]}),Object(A.jsxs)("div",{className:c.detailsRow3,children:[Object(A.jsxs)("div",{className:c.ticketPrice,children:[Object(A.jsx)("div",{className:c.label,children:Object(A.jsx)("span",{className:c.cardLabel,children:"Ticket price"})}),Object(z.d)(t.proceeds.ticketPrice,t.proceeds.mint)," ",t.proceeds.mint.symbol]}),Object(A.jsx)("div",{children:Object(A.jsx)(k.a,{className:c.goToRaffle,children:Object(A.jsx)(N.a,{})})})]})]})]}))},K=n(23),L=Object(I.a)((function(e){return{rafflesGrid:{display:"flex",flexGrow:"initial",width:"100%"},titleBar:function(e){return{marginBottom:e.device===K.a.Phone?"20px":"50px"}},mainContent:{marginTop:"100px",textAlign:"center"},raffleCardContainer:function(e){return{margin:e.device===K.a.Phone?"0 10px 20px 10px":"0 40px 50px 40px"}}}})),F=n(1),W=n.n(F),G=n(5),U=n(25),_=n(54),V=n(86),H=n(469),Z=n(470),X=n(103),q=Object(a.createContext)(),Y=function(e){var t=e.children,n=Object(h.d)().connection,r=Object(h.c)(),i=Object(a.useMemo)((function(){return{draffleClient:new _.c(H,X.d,Object(V.a)(n,r))}}),[n,r]).draffleClient,c=Object(a.useMemo)((function(){return{dispenserClient:new _.c(Z,X.a,Object(V.a)(n,r))}}),[n,r]).dispenserClient;return Object(A.jsx)(q.Provider,{value:{draffleClient:i,dispenserClient:c},children:t})},J=function(){var e=Object(a.useContext)(q);if(void 0===e)throw new Error("useProgramApis must be used within a ProgramApisProvider");return e},Q=n(225),$=n(223),ee=n(102),te=new Map([["AopPMW9k4Q5K8bw9Vf8KEqk5wJNrkvkBWDCKzq1eDUBr",{name:"dRafflenet #1"}],["3u7t4uGkMP1VW5obT78rgk74zdATTuNuy6BWPfRucLfj",{name:"dRaffle for the win",alternatePurchaseMints:[new U.c("72UgZ7avdJZBbv3wR7hbWcFy6dyHHNAoJw7CimGA55Zh")]}],["2mrwjEz67DXTWKaVPjWwkwVPtGRWyKrTeyK5VzintsC5",{name:"dRaffle with a loooooooooooooooong name"}],["9FoUjfUpWwhHYaGKM9G5eYab7qow3oWqdo2G5Ehj3h5L",{name:"Oh my dRaffle",overviewImageUri:"/resources/001-mainnet-launch.gif",alternatePurchaseMints:[new U.c("So11111111111111111111111111111111111111112")]}]]),ne=new Map([["FnHwnXGBz7NRZEsT8u12pE2cxURt8mYHQZykzmRtjb27",{name:"dRaffle launch raffle",overviewImageUri:"/resources/001-mainnet-launch.gif"}],["2QjkshNu3mrcCnriekTpppa3PFwnAR9Yf7v5vc54m2Yh",{name:"First SOL raffle",overviewImageUri:"/resources/solana-logo.gif"}],["8aEm1MoDqkYT5vCB21jC6aMMcMbdQJgmHpyBbtHDfUjU",{name:"Anti Artist Club",overviewImageUri:"/resources/aartist-raffle-overview.gif"}],["2ziwAj4awgvNyn8ywwjkBRkBsmv259u9vVyEdrGYTb54",{name:"More SOL",overviewImageUri:"/resources/solana-logo.gif"}],["EgHys3WPcM5WRpKqVHs1REfK6Npzq9sJ7dZPFPzQy2xG",{name:"Triple SOL",overviewImageUri:"/resources/solana-logo-x3.gif"}],["CjzFZfrMW4D1jZVm5upCobRi96UYnQTk5cescSt12rhV",{name:"SAMO raffle",overviewImageUri:"/resources/samo-x3.gif"}],["EZtBKgWq66KT4jRKtd4VT3LWh3mVC4pwcCsqLzKas63G",{name:"BitBoat raffle",overviewImageUri:"/resources/bitboat-raffle.gif"}],["D45wu2y8EjetNwkCxVLqW3Rfk5oZWiuUvHhMavSjW3Uc",{name:"One Degen Trash Panda",overviewImageUri:"/resources/dtp-trash.jpeg"}],["CqGigszWWCsFXkhgezUP8xBxrweriiFyvhkMgvrxfuh3",{name:"Back with some SOL",overviewImageUri:"/resources/solana-logo.gif"}]]),ae=ee.b?te:ne,re=Object(a.createContext)(),ie=function(e){var t=e.children,n=void 0===t?null:t,r=Object(h.d)().connection,i=J().draffleClient,c=Object(a.useState)(!0),s=Object(f.a)(c,2),o=s[0],l=s[1],u=Object(a.useState)(new Map),d=Object(f.a)(u,2),p=d[0],m=d[1],j=function(){var e=Object(G.a)(W.a.mark((function e(t,n,a,r,i){var c,s,o,l;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.b)(t.publicKey,a,r);case 2:if(c=e.sent,s=new Map,i){e.next=15;break}return e.prev=5,e.next=8,a.account.entrants.fetch(t.account.entrants);case 8:i=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),console.log("Raffle ".concat(t.publicKey," entrants account is closed")),i={entrants:[],max:0,total:0};case 15:return s=Object(Q.d)(i),e.next=18,Object(Q.a)(t.publicKey,a,t.account.totalPrizes);case 18:return o=e.sent,l=new Date(1e3*t.account.endTimestamp.toNumber()),e.abrupt("return",{publicKey:t.publicKey,metadata:n,endTimestamp:l,entrantsCap:i.max,entrants:s,entrantsRaw:i.entrants,totalTickets:i.total,entrantsAccountAddress:t.account.entrants,randomness:t.account.randomness,prizes:o,proceeds:{address:c.address,ticketPrice:t.account.ticketPrice,mint:c.mintInfo},isEnded:l<new Date});case 21:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),b=Object(a.useCallback)(Object(G.a)(W.a.mark((function e(){var t,n,a,c,s,o,u=arguments;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]&&u[0],l(!0),n=[],a=[],e.prev=4,e.next=7,Object(Q.c)(i);case 7:c=e.sent,s=Object(f.a)(c,2),n=s[0],a=s[1],e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:return n=n.filter((function(e){var n=e.publicKey;return t||ae.has(n.toBase58())})),e.next=19,Promise.all(n.map(function(){var e=Object(G.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j(t,ae.get(t.publicKey.toString())||{name:"Unnamed Raffle",alternatePurchaseMints:[]},i,r,null===(n=a.find((function(e){return e.publicKey.equals(t.account.entrants)})))||void 0===n?void 0:n.account));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:o=e.sent.reduce((function(e,t){return e.set(t.publicKey.toString(),t),e}),new Map),m(o),l(!1);case 22:case"end":return e.stop()}}),e,null,[[4,13]])}))),[r,i]),x=Object(a.useCallback)(function(){var e=Object(G.a)(W.a.mark((function e(t){var n,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.has(t.toString())&&ae.has(t)){e.next=2;break}return e.abrupt("return");case 2:return l(!0),e.next=5,i.account.raffle.fetch(new U.c(t));case 5:return n=e.sent,e.next=8,j({publicKey:new U.c(t),account:n},ae.get(t),i,r);case 8:a=e.sent,Object(M.a)(p.get(t.toString()),a)||m((function(e){var n=Object($.cloneDeep)(e);return n=n.set(t,a)})),l(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,i,p,m]);return Object(a.useEffect)((function(){b()}),[b]),Object(A.jsx)(re.Provider,{value:{raffles:p,fetchAllRaffles:b,updateRaffleById:x,fetching:o},children:n})},ce=function(){var e=Object(a.useContext)(re);if(void 0===e)throw new Error("useRafflesStore must be used within an RafflesStoreProvider");return e},se=n(74),oe=n(823),le=n(229),ue=n(357),de=n(72),pe=Object(I.a)((function(e){return{filterBar:function(e){return{width:"100%",display:"flex",flexDirection:e.device===K.a.Phone?"column":"row",alignItems:"center",marginBottom:"30px",justifyContent:"space-between"}},leftSection:{width:"25%"},middleSection:{width:"50%",display:"flex",justifyContent:"center"},rightSection:{width:"25%",display:"flex",justifyContent:"flex-end"},leftPhoneSection:{width:"100%",display:"flex",justifyContent:"center"},rightPhoneSection:{width:"100%",display:"flex",justifyContent:"center"},ownRafflesSwitchContainer:{display:"flex",justifyContent:"center",width:200,height:30,border:"2px solid white",borderRadius:"2px",boxShadow:"0 0 5px 0 #e86bff"},showEndedRaffles:{display:"flex",alignItems:"center"},showEndedRafflesCheckbox:{color:e.palette.primary.main,"&.Mui-checked":{color:e.palette.primary.main},"&:hover":{backgroundColor:"transparent"}},hideEndedText:{color:"white",backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"}}}})),fe=function(e){var t=e.hideEndedRaffles,n=e.setHideEndedRaffles,a=e.setShowOwnRafflesOnly,r=Object(E.a)().device,i=pe({device:r}),c=Object(de.a)(),s=Object(h.e)().connected,o=[{label:"ALL",value:!1},{label:"MINE",value:!0}],l=function(e){a(e)};return r===K.a.Phone?Object(A.jsxs)("div",{className:i.filterBar,children:[Object(A.jsx)("div",{className:i.leftPhoneSection,children:s&&Object(A.jsx)("div",{className:i.ownRafflesSwitchContainer,children:Object(A.jsx)(ue.a,{onChange:l,options:o,optionBorderRadius:0,wrapperBorderRadius:0,fontSize:12,initialSelectedIndex:0,selectionIndicatorMargin:0,selectedBackgroundColor:c.palette.primary.main,backgroundColor:"transparent",fontColor:"white"})})}),Object(A.jsx)("div",{className:i.rightPhoneSection,children:Object(A.jsxs)("div",{className:i.showEndedRaffles,children:[Object(A.jsx)(oe.a,{className:i.showEndedRafflesCheckbox,value:t,checked:t,onClick:function(){return n((function(e){return!e}))}}),Object(A.jsx)(le.a,{variant:"text",disableRipple:!0,className:i.hideEndedText,onClick:function(){return n((function(e){return!e}))},children:"Hide ended raffles"})]})})]}):Object(A.jsxs)("div",{className:i.filterBar,children:[Object(A.jsx)("div",{className:i.leftSection}),Object(A.jsx)("div",{className:i.middleSection,children:s&&Object(A.jsx)("div",{className:i.ownRafflesSwitchContainer,children:Object(A.jsx)(ue.a,{onChange:l,options:o,optionBorderRadius:0,wrapperBorderRadius:0,fontSize:12,initialSelectedIndex:0,selectionIndicatorMargin:0,selectedBackgroundColor:c.palette.primary.main,backgroundColor:"transparent",fontColor:"white"})})}),Object(A.jsx)("div",{className:i.rightSection,children:Object(A.jsxs)("div",{className:i.showEndedRaffles,children:[Object(A.jsx)(oe.a,{className:i.showEndedRafflesCheckbox,value:t,checked:t,onClick:function(){return n((function(e){return!e}))}}),Object(A.jsx)(le.a,{variant:"text",disableRipple:!0,className:i.hideEndedText,onClick:function(){return n((function(e){return!e}))},children:"Hide ended raffles"})]})})]})},me=function(){var e=Object(E.a)().device,t=L({device:e}),n=Object(h.e)().publicKey,r=ce(),i=r.raffles,c=r.fetchAllRaffles,s=r.fetching,o=Object(a.useState)(!1),l=Object(f.a)(o,2),u=l[0],d=l[1],x=Object(a.useState)(!1),O=Object(f.a)(x,2),g=O[0],v=O[1];Object(a.useEffect)(c,[c]);var y=Object(a.useMemo)((function(){return{own:function(e){return e.entrants.has((null===n||void 0===n?void 0:n.toString())||"")},ongoing:function(e){return new Date<e.endTimestamp}}}),[n]),w=Object(a.useMemo)((function(){var e=Object(p.a)(i.values()).sort((function(e,t){return t.endTimestamp.getTime()-e.endTimestamp.getTime()}));return u&&(e=e.filter(y.own)),g&&(e=e.filter(y.ongoing)),e}),[i,y,u,g]);return 0===i.size&&s?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"h1",className:t.titleBar,children:"Explore dRaffles"}),Object(A.jsx)("div",{className:t.mainContent,children:Object(A.jsx)(b.a,{color:"secondary"})})]}):0===i.size?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"h1",className:t.titleBar,children:"Explore dRaffles"}),Object(A.jsx)(m.a,{variant:"h4",className:t.mainContent,children:"dRaffles will be coming soon!"})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"h1",className:t.titleBar,children:"Explore dRaffles"}),Object(A.jsx)(fe,{hideEndedRaffles:g,setHideEndedRaffles:v,setShowOwnRafflesOnly:d}),w.length>0?Object(A.jsx)(j.a,{container:!0,justifyContent:"center",direction:"row",className:t.rafflesGrid,children:w.filter((function(e){return e.prizes.length>0})).map((function(e){return Object(A.jsx)(D,{className:t.raffleCardContainer,raffle:e},e.publicKey.toString())}))}):Object(A.jsx)(m.a,{variant:"h4",className:t.mainContent,children:"No dRaffles to display."})]})},je=function(){return Object(A.jsx)(se.a,{children:Object(A.jsx)(me,{})})},be=n(140),he=n(808),xe=n(809),Oe=n(29),ge=function(){var e=Object(G.a)(W.a.mark((function e(t,n,a,r){var i,c,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a>=n.prizes.length)){e.next=2;break}throw Error("Prize index does not match prize list (".concat(n.prizes.length,")"));case 2:return i=n.prizes[a],e.next=5,Oe.Token.getAssociatedTokenAddress(Oe.ASSOCIATED_TOKEN_PROGRAM_ID,Oe.TOKEN_PROGRAM_ID,i.mint.publicKey,t.provider.wallet.publicKey);case 5:return c=e.sent,e.next=8,t.provider.connection.getAccountInfo(c);case 8:return null===e.sent&&(s=[Object(z.a)(i.mint.publicKey,c,t.provider.wallet.publicKey)]),e.next=12,t.rpc.claimPrize(a,r,{accounts:{raffle:n.publicKey,entrants:n.entrantsAccountAddress,prize:i.address,winnerTokenAccount:c,tokenProgram:Oe.TOKEN_PROGRAM_ID},instructions:s});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ve=n(479),ye=n(111),we=n(352),ke=n(59),Se=Object(I.a)((function(e){return{label:{textAlign:"left"},value:{display:"flex",flexDirection:"row",alignItems:"center",verticalAlign:"center"},actionSection:{padding:"5px 5px",minHeight:"180px",width:"100%",backgroundColor:Object(ke.a)(e.palette.common.white,.15),borderRadius:"4px",boxShadow:"0 2px 4px 0 #000",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},mainButton:{width:"100%",height:"100%",backgroundColor:e.palette.primary.main,borderColor:e.palette.primary.main,color:e.palette.common.white,"&:hover":{backgroundColor:Object(ke.b)(e.palette.primary.main,.2),borderColor:Object(ke.b)(e.palette.primary.main,.2)},"&:disabled":{backgroundColor:"#393939",borderColor:"#393939",color:"#898989"}}}})),Ne=Object(I.a)((function(e){return{textHighlight:{marginBottom:"10px"},scrollLink:{textTransform:"none",marginRight:"-5px",color:e.palette.primary.main,"&:hover":{textShadow:"0px 0px 5px #e86bff",backgroundColor:"transparent",textDecoration:"none"}},scrollIcon:{transform:"rotate(90deg)",fontSize:"50px",opacity:"0.6",marginTop:"20px",marginBottom:"60px"},connectToBuyButton:{marginTop:"20px",width:"80%",height:"40px"}}})),Ce=function(){var e,t=Date.now()+5e3,n={startVelocity:30,spread:360,ticks:60,zIndex:0};function a(e,t){return Math.random()*(t-e)+e}return e=setInterval((function(){var r=t-Date.now();if(r<=0)return clearInterval(e);var i=r/5e3*50;Object(we.a)(Object.assign({},n,{particleCount:i,origin:{x:a(.1,.3),y:Math.random()-.2}})),Object(we.a)(Object.assign({},n,{particleCount:i,origin:{x:a(.7,.9),y:Math.random()-.2}}))}),250)},Te=function(e){var t=e.raffle,n=e.userPubkey,r=e.entrant,i=e.entrantWinningTickets,c=e.scrollRef,s=Object(x.a)(Object(x.a)({},Se()),Ne()),o=Object(a.useMemo)((function(){return 0===t.prizes.length}),[t]),l=Object(a.useMemo)((function(){return!!t.randomness}),[t]),u=Object(a.useMemo)((function(){return!!n}),[n]),d=Object(a.useMemo)((function(){return((null===r||void 0===r?void 0:r.tickets.length)||0)>0}),[r]);return Object(a.useEffect)((function(){if(0!==i.length){var e=Ce();return function(){return clearInterval(e)}}}),[i.length]),o?Object(A.jsx)(A.Fragment,{children:"No prizes to reveal!"}):l?u?d?0===i.length?Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{variant:"h3",className:s.textHighlight,children:"Oh no! No prize."}),Object(A.jsx)(m.a,{variant:"body1",children:"Better luck next time!"})]}):Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{variant:"h3",className:s.textHighlight,children:"Hurray, you won!"}),Object(A.jsx)("div",{children:Object(A.jsxs)(m.a,{children:[Object(A.jsx)(le.a,{className:s.scrollLink,variant:"text",onClick:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},children:"Scroll"}),"to see your prize(s)!"]})})]}):Object(A.jsx)(m.a,{variant:"body1",children:"Uh oh! It looks like you did not participate in this raffle!"}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"h3",className:s.textHighlight,children:"Winners have been announced."}),Object(A.jsx)(m.a,{variant:"body1",children:"Connect your wallet to check if you have won any prizes!"}),Object(A.jsx)(ye.b,{className:"".concat(s.mainButton," ").concat(s.connectToBuyButton),children:"Connect to reveal"})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"body1",className:s.textHighlight,children:"Winners will be announced soon."}),Object(A.jsx)(m.a,{variant:"body1",children:"Hang tight!"})]})},Me=n(794),Ie=n(795),Pe=n(796),Ae=Object(I.a)((function(e){return{root:function(e){var t=e.device;return{width:"100%",minWidth:t===K.a.Phone?"256px":"313px",maxWidth:(K.a.Phone,"380px"),display:"flex",flexDirection:"column",fontSize:"30px"}},ticketsSection:{display:"flex",flexDirection:"row"},totalTickets:{width:"58%"},ticketPrice:{width:"42%"},myTickets:{width:"55%"},showMyTickets:{width:"45%",display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"baseline",paddingBottom:"5px"},ticketButton:{fontSize:"14px",color:e.palette.primary.main,textShadow:"0px 0px 5px #e86bff",padding:"0 0","&:hover":{backgroundColor:"transparent"}},separator:{margin:"0 5px"}}})),Re=function(e){var t=e.setOpen,n=e.userTickets,a=Object(O.a)(e,["setOpen","userTickets"]);return Object(A.jsxs)(Me.a,Object(x.a)(Object(x.a)({},a),{},{onClose:function(){return t(!1)},fullWidth:!0,children:[Object(A.jsx)(Ie.a,{children:"My tickets"}),Object(A.jsx)(Pe.a,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(A.jsxs)("div",{children:["#",e+1]},e)}))})]}))},ze=function(e){var t,n=e.userConnected,r=e.raffle,i=e.userTickets,c=Object(E.a)().device,s=Object(x.a)(Object(x.a)({},Se()),Ae({device:c})),o=Object(a.useState)(!1),l=Object(f.a)(o,2),u=l[0],d=l[1];return Object(A.jsxs)("div",{className:s.root,children:[Object(A.jsxs)("div",{className:s.ticketsSection,children:[Object(A.jsxs)("div",{className:s.totalTickets,children:[Object(A.jsx)(m.a,{variant:"overline",className:s.label,children:"Tickets sold"}),Object(A.jsxs)("div",{className:s.value,children:[Object(A.jsx)(T.a,{start:0,end:r.totalTickets,delay:0,duration:.8,preserveValue:!0,useEasing:!0,children:function(e){var t=e.countUpRef;return Object(A.jsx)(m.a,{variant:"h4",ref:t})}}),Object(A.jsx)(m.a,{variant:"h4",className:s.separator,children:"/"}),Object(A.jsx)(m.a,{variant:"h4",children:"".concat(r.entrantsCap)})]})]}),Object(A.jsxs)("div",{className:s.ticketPrice,children:[Object(A.jsx)(m.a,{variant:"overline",className:s.label,children:"Ticket Price"}),Object(A.jsx)(m.a,{variant:"h4",children:"".concat(Object(z.d)(r.proceeds.ticketPrice,r.proceeds.mint)," ").concat(r.proceeds.mint.symbol)})]})]}),n&&Object(A.jsxs)("div",{className:s.ticketsSection,children:[Object(A.jsxs)("div",{className:s.myTickets,children:[Object(A.jsx)(m.a,{variant:"overline",className:s.label,children:"My tickets"}),Object(A.jsx)("div",{className:s.value,children:Object(A.jsx)(T.a,{start:0,end:null!==(t=null===i||void 0===i?void 0:i.length)&&void 0!==t?t:0,delay:0,duration:.8,preserveValue:!0,useEasing:!0,children:function(e){var t=e.countUpRef;return Object(A.jsx)(m.a,{variant:"h4",ref:t})}})})]}),(null===i||void 0===i?void 0:i.length)&&Object(A.jsxs)("div",{className:s.showMyTickets,children:[Object(A.jsx)(le.a,{variant:"text",size:"small",disableRipple:!0,onClick:function(){d(!0)},className:s.ticketButton,children:"See my tickets"}),Object(A.jsx)(Re,{userTickets:i,open:u,setOpen:d})]})]})]})},Be=Object(I.a)((function(e){return{root:{height:"100%"},claimButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},claimButtonContentLeft:{width:"20%",display:"flex",justifyContent:"center"},claimButtonContentMiddle:{width:"80%"},claimButtonContentRight:{width:"0%"},claimSpinner:{height:"50px",color:e.palette.secondary.main}}})),Ee=function(e){var t=e.prize,n=e.prizeIndex,r=e.ticketIndex,i=e.claimPrize,c=Object(x.a)(Object(x.a)({},Se()),Be()),s=Object(a.useState)(new Map),o=Object(f.a)(s,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(A.jsx)("div",{className:c.root,children:Object(A.jsx)(le.a,{variant:"outlined",color:"secondary",onClick:Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((function(e){return Object($.cloneDeep)(e.set(n,!0))})),e.next=3,i(n,r);case 3:u((function(e){return Object($.cloneDeep)(e.set(n,!1))}));case 4:case"end":return e.stop()}}),e)}))),disabled:t.amount.isZero()||!!l.get(n),className:c.mainButton,children:Object(A.jsx)("div",{className:c.claimButtonContent,children:l.get(n)?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:c.claimButtonContentLeft,children:Object(A.jsx)(b.a,{size:20,className:c.claimSpinner})}),Object(A.jsx)("div",{className:c.claimButtonContentMiddle,children:"Processing..."}),Object(A.jsx)("div",{className:c.claimButtonContentRight})]}):Object(A.jsx)(A.Fragment,{children:"Claim"})})})})},De=function(e){var t=e.endRange,n=e.drawLength,r=void 0===n?50:n,i=e.spinIntervalMs,c=void 0===i?100:i,s=e.redrawIntervalMs,o=void 0===s?5e3:s,l=Object(a.useState)(0),u=Object(f.a)(l,2),d=u[0],p=u[1],m=Object(a.useState)([]),j=Object(f.a)(m,2),b=j[0],h=j[1];if(Object(a.useEffect)((function(){var e=setInterval((function(){return h(Array.from({length:r},(function(){return Math.round(Math.random()*t)})))}),o);return function(){return clearInterval(e)}}),[t,o,r,h]),Object(a.useEffect)((function(){var e=setInterval((function(){return p((function(e){return++e%r}))}),c);return function(){return clearInterval(e)}}),[r,c,p]),0!==t)return b[d]},Ke=Object(I.a)((function(e){return{root:function(e){var t=e.device;return{height:t===K.a.Phone?"25vw":"300px",width:t===K.a.Phone?"100%":"200px",position:"relative",cursor:"pointer","&:hover":{boxShadow:"0 3px 10px 0 #111",transform:"scale3d(1.02, 1.02, 1)"},"&:active":{transform:"scale3d(1, 1, 1)"},display:"flex",flexDirection:t===K.a.Phone?"row":"column",justifyContent:t===K.a.Phone?"flex-start":"center"}},media:function(e){var t=e.device;return Object(x.a)({},t===K.a.Phone?{width:"25vw",height:"25vw"}:{height:"200px"})},prizeInfo:function(e){var t=e.device;return{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:t===K.a.Phone?"baseline":"center",fontSize:(K.a.Phone,"15px"),padding:t===K.a.Phone?" 8px":"8px"}},prizeInfoInner:{},prizeNameRow:function(t){var n=t.device;return{display:"flex",flexDirection:"row",color:e.palette.primary.main,fontWeight:"bold",textTransform:"uppercase",alignItems:"center",justifyContent:n===K.a.Phone?"left":"center",textAlign:n===K.a.Phone?"left":"center"}},prizeName:{color:e.palette.primary.main,marginLeft:"5px"},winnerSection:{width:"100%",marginTop:"10px",display:"flex",flexDirection:"row"},winnerRow:{display:"flex",flexDirection:"row"},winnertTicket:{marginLeft:"10px"},winnerPubkey:{color:e.palette.secondary.main,marginLeft:"10px"},cardBadge:function(t){var n=t.device;return Object(x.a)(Object(x.a)({fontSize:"12px",fontWeight:"bold",width:"70px",textAlign:"center",padding:"2px",position:"absolute"},n===K.a.Phone?{top:"3px",left:"3px"}:{top:"5px",right:"5px"}),{},{color:"white",backgroundColor:e.palette.primary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"})}}})),Le=function(e){var t=e.message,n=e.maxCharLength,a=e.addTooltip,r=void 0!==a&&a;return t.length<=n?Object(A.jsx)(A.Fragment,{children:t}):r?Object(A.jsx)(w.a,{title:t,placement:"top",children:Object(A.jsxs)(A.Fragment,{children:[t.slice(0,n-4)," ..."]})}):Object(A.jsxs)(A.Fragment,{children:[t.slice(0,n-4)," ..."]})},Fe=n(759),We=n(755),Ge=n(494),Ue=Object(I.a)((function(e){return{modal:function(e){e.device;return{display:"flex",alignItems:"center",justifyContent:"space-around",width:"100%"}},content:function(t){t.device;return{outline:"none",width:"50%",minWidth:"250px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,2,3)}},header:{width:"100%",display:"flex",justifyContent:"flex-end"},body:function(e){var t=e.device;return{width:"100%",display:"flex",flexDirection:t===K.a.Phone?"column":"row",marginTop:t===K.a.Phone?"5px":"0"}},contentLeft:function(e){return{width:e.device===K.a.Phone?"100%":"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},media:{width:"90%"},contentRight:function(t){var n=t.device;return{width:n===K.a.Phone?"100%":"50%",height:"100%",display:"flex",flexDirection:"column",alignItems:n===K.a.Phone?"center":"baseline",textAlign:n===K.a.Phone?"center":"left",justifyContent:"space-evenly",padding:n===K.a.Phone?e.spacing(1):e.spacing(0,3,3,3)}},ticketButton:{marginTop:"10px",fontSize:"14px",color:e.palette.secondary.main,textShadow:"0px 0px 5px #e86bff",padding:"0 0","&:hover":{backgroundColor:"transparent"}}}})),_e=n(801),Ve=n(807),He=function(e){var t=e.height;return Object(A.jsx)("div",{style:{height:t,width:"100%"}})},Ze=function(e){var t=e.isOpen,n=e.setIsOpen,a=e.prize,r=e.prizeRank,i=Object(E.a)().device,c=Ue({device:i}),s=a.meta.imageUri;return Object(A.jsx)(Fe.a,{open:t,onClose:function(){n(!1)},className:c.modal,BackdropComponent:We.a,BackdropProps:{timeout:500},children:Object(A.jsx)(Ge.a,{in:t,children:Object(A.jsxs)("div",{className:c.content,children:[Object(A.jsx)("div",{className:c.header,children:Object(A.jsx)(k.a,{size:"small",onClick:function(){return n(!1)},children:Object(A.jsx)(_e.a,{})})}),Object(A.jsxs)("div",{className:c.body,children:[Object(A.jsx)("div",{className:c.contentLeft,children:Object(A.jsx)("img",{src:s,className:c.media,alt:a.mint.name})}),Object(A.jsxs)("div",{className:c.contentRight,children:[Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{variant:"overline",children:"Codename"}),Object(A.jsx)(m.a,{variant:"body1",children:a.mint.name})]}),Object(A.jsx)(He,{height:i===K.a.Phone?"5px":"10px"}),void 0!==r&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{variant:"overline",children:"Prize rank"}),Object(A.jsx)(m.a,{variant:"body1",children:r+1})]}),Object(A.jsx)(He,{height:i===K.a.Phone?"5px":"10px"})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{variant:"overline",children:"Mint address"}),Object(A.jsx)(m.a,{variant:"body1",children:Object(M.c)(a.mint.publicKey)})]}),Object(A.jsx)(He,{height:i===K.a.Phone?"5px":"10px"}),Object(A.jsxs)(le.a,{variant:"text",size:"small",disableRipple:!0,onClick:function(){var e=window.open("https://solscan.io/token/".concat(a.mint.publicKey.toString()),"_blank");null===e||void 0===e||e.focus()},className:c.ticketButton,children:["See on Solscan"," ",Object(A.jsx)(Ve.a,{style:{height:"17px",marginLeft:"5px"}})]})]})]})]})})})},Xe=function(e){var t=e.endRange,n=De({endRange:t});return Object(A.jsxs)(A.Fragment,{children:["#",String((n||0)+1).padStart(4,"0")]})},qe=function(e){var t=e.prize,n=e.raffle,r=e.index,i=e.badgeText,c=e.winner,s=e.className,o=Object(O.a)(e,["prize","raffle","index","badgeText","winner","className"]),l=Object(E.a)().device,u=Object(x.a)(Object(x.a)({},Se()),Ke({device:l})),d=Object(a.useState)(!1),p=Object(f.a)(d,2),j=p[0],b=p[1],h=Object(a.useState)(!1),w=Object(f.a)(h,2),k=w[0],N=w[1],C=t.meta.imageUri,T=Object(a.useMemo)((function(){return l===K.a.Phone?14:18}),[l]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Ze,{isOpen:k,setIsOpen:N,prize:t,prizeRank:r}),Object(A.jsxs)(g.a,Object(x.a)(Object(x.a)({onClick:function(){N(!0)}},o),{},{className:"".concat(u.root," ").concat(s),children:[i&&Object(A.jsx)("div",{className:u.cardBadge,children:i}),!j&&Object(A.jsx)("div",{children:Object(A.jsx)(S.a,{variant:"rect",animation:"wave",classes:{root:u.media}})}),Object(A.jsx)(v.a,{component:"img",className:u.media,src:C,alt:t.mint.name,style:j?{}:{display:"none"},onLoad:function(){return b(!0)}}),Object(A.jsx)(y.a,{className:u.prizeInfo,children:Object(A.jsxs)("div",{className:u.prizeInfoInner,children:[Object(A.jsxs)("div",{className:u.prizeNameRow,children:[Object(A.jsx)(m.a,{variant:"body1",children:void 0!==r&&"#".concat(r+1," ")}),Object(A.jsx)(m.a,{variant:"body1",className:u.prizeName,children:Object(A.jsx)(Le,{message:t.mint.name,maxCharLength:T,addTooltip:!0})})]}),Object(A.jsx)("div",{className:u.winnerSection,children:void 0!==c?Object(A.jsxs)("div",{children:[Object(A.jsx)(m.a,{variant:"body1",children:"Winner: #".concat(String(c+1).padStart(4,"0"))}),Object(A.jsxs)("div",{className:u.winnerRow,children:[Object(A.jsx)(m.a,{variant:"body1",children:"Pubkey: "}),Object(A.jsx)(m.a,{variant:"body1",className:u.winnerPubkey,children:Object(M.c)(n.entrantsRaw[c])})]})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"body1",children:"Drawing..."}),Object(A.jsx)(m.a,{variant:"body1",className:u.winnertTicket,children:Object(A.jsx)(Xe,{endRange:n.totalTickets})})]})})]})})]}))]})},Ye=Object(I.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},prizesGrid:function(e){return{scrollMargin:"130px",display:"flex",justifyContent:"space-around",flexGrow:"initial",width:"100%",marginTop:e.device===K.a.Phone?"-20px":"5px"}},prizeItem:function(e){var t=e.device;return{margin:t===K.a.Phone?"0":"10px",justifyContent:"center",alignItems:"center",marginTop:t===K.a.Phone?"30px":"0",marginBottom:t===K.a.Phone?"0":"30px"}},claimButtonContainer:function(e){var t=e.device;return Object(x.a)(Object(x.a)({},t===K.a.Phone?{height:"25px"}:{}),{},{marginTop:t===K.a.Phone?"8px":"10px"})}}})),Je=function(e){var t=e.raffle,n=e.entrantWinningTickets,r=e.winningTickets,i=e.claimPrize,c=e.scrollRef,s=Object(E.a)().device,o=Object(x.a)(Object(x.a)({},Se()),Ye({device:s}));return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(A.jsx)("div",{className:o.root,children:Object(A.jsx)(j.a,{ref:c,container:!0,justifyContent:"space-between",direction:s===K.a.Phone?"column":"row",className:o.prizesGrid,children:t.prizes.map((function(e,a){var c=r[a],s=n.some((function(e){return e.ticketIndex===c}));return Object(A.jsxs)(j.a,{item:!0,className:o.prizeItem,children:[Object(A.jsx)(qe,Object(x.a)(Object(x.a)({prize:e,raffle:t},e.amount.isZero()?{badgeText:"Claimed"}:{}),{},{index:a,winner:c}),a),s&&Object(A.jsx)("div",{className:o.claimButtonContainer,children:Object(A.jsx)(Ee,{claimPrize:i,prize:e,prizeIndex:a,ticketIndex:c})})]},a)}))})})},Qe=Object(I.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},prizesGrid:{display:"flex",flexGrow:"initial",width:"100%"},prizeItem:{margin:"0 5px 30px 5px"},claimButtonContainer:{marginTop:"20px"},claimButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",color:"white"}}})),$e=function(e){var t=e.raffle,n=e.winningTickets,a=void 0===n?[]:n,r=Object(x.a)(Object(x.a)({},Se()),Qe());return 0===t.prizes.length?Object(A.jsx)("div",{className:r.root,children:"No prizes"}):1===t.prizes.length?Object(A.jsx)("div",{className:r.root,children:Object(A.jsx)(j.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:r.prizesGrid,children:Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(qe,{prize:t.prizes[0],raffle:t,winner:a[0],className:r.prizeItem})})})}):2===t.prizes.length?Object(A.jsx)("div",{className:r.root,children:Object(A.jsxs)(j.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:r.prizesGrid,children:[Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(qe,{prize:t.prizes[0],index:0,raffle:t,winner:a[0],className:r.prizeItem})}),Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(qe,{prize:t.prizes[1],index:1,raffle:t,winner:a[1],className:r.prizeItem})})]})}):Object(A.jsx)("div",{className:r.root,children:Object(A.jsxs)(j.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:r.prizesGrid,children:[Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(qe,{prize:t.prizes[0],index:0,raffle:t,winner:a[0],className:r.prizeItem})}),Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(qe,{prize:t.prizes[1],index:1,raffle:t,winner:a[1],className:r.prizeItem})}),Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(qe,{prize:t.prizes[2],index:2,raffle:t,winner:a[2],className:r.prizeItem})})]})})},et=Object(I.a)((function(e){return{root:{width:"100%",height:"inherit",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},topSection:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},raffleTitle:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center",justifyItems:"space-between"},raffleSubtitle:{color:e.palette.secondary.main,marginLeft:"10px"},leftTitleSection:{paddingLeft:"20px",width:"10%",display:"flex"},middleTitleSection:{width:"90%",display:"flex",justifyContent:"center",textAlign:"center"},rightTitleSection:{width:"10%"},backButton:{color:e.palette.common.black,backgroundColor:Object(ke.a)(e.palette.secondary.main,.8),"&:hover":{boxShadow:"0px 0px 5px ".concat(e.palette.secondary.main,", inset 0px 0px 5px ").concat(e.palette.secondary.main),backgroundColor:Object(ke.a)(e.palette.secondary.main,.8)}},backButtonIcon:{},mainContent:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-end"},prizesSection:{width:"70%",display:"flex",flexDirection:"column",paddingRight:"20px",minHeight:"450px",justifyContent:"center",alignItems:"center"},prizesHeader:{marginBottom:"10px"},seeAllPrizesButton:{marginLeft:"5px",color:e.palette.secondary.main,textTransform:"initial","&:hover":{textShadow:"0px 0px 5px ".concat(e.palette.secondary.main),backgroundColor:"transparent",textDecoration:"none"}},detailsSection:function(e){var t=e.device;return{paddingTop:"20px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",width:"30%",minWidth:t===K.a.Phone?"256px":"313px",maxWidth:(K.a.Phone,"380px"),maxHeight:"500px"}},actionSectionContainer:{width:"100%"},totalTickets:{marginRight:"80px"},prizeGallerySection:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},scrollIcon:{color:e.palette.common.white,transform:"rotate(90deg)",fontSize:"50px",opacity:"0.6",marginTop:"20px",marginBottom:"60px"},spacer:{width:"100%",height:"15px"}}})),tt=function(e){var t=e.raffle,n=e.updateRaffle,r=Object(E.a)().device,i=Object(x.a)(Object(x.a)({},Se()),et({device:r})),c=Object(u.f)().push,s=J().draffleClient,o=Object(a.useRef)(null),f=Object(a.useMemo)((function(){if(s.provider.wallet.publicKey)return null===t||void 0===t?void 0:t.entrants.get(s.provider.wallet.publicKey.toString())}),[t,s.provider.wallet.publicKey]),j=Object(a.useMemo)((function(){if(!t.randomness||!t.entrants||0===t.entrants.size)return[];var e=t.randomness;return t.prizes.map((function(n,a){return Object(ve.a)(e,a)%t.totalTickets}))}),[t]),b=Object(a.useCallback)(function(){var e=Object(G.a)(W.a.mark((function e(a,r){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ge(s,t,a,r);case 3:return e.next=5,Object(be.sleep)(500);case 5:n(),l.b.success("Prize claimed, check your wallet!"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.msg?l.b.error("Transaction failed: ".concat(e.t0.msg)):l.b.error("Unexpected error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[s,t,n]),h=Object(a.useMemo)((function(){return f&&j?j.reduce((function(e,t,n){return(null===f||void 0===f?void 0:f.tickets.includes(t))?[].concat(Object(p.a)(e),[{prizeIndex:n,ticketIndex:t}]):e}),[]):[]}),[f,j]);return t?Object(A.jsxs)("div",{className:i.root,children:[r===K.a.Phone?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(m.a,{variant:"h1",children:["> ".concat(t.metadata.name),Object(A.jsx)("span",{className:i.raffleSubtitle,children:"[ended]"})]}),Object(A.jsx)("div",{className:i.spacer}),Object(A.jsx)(ze,{raffle:t,userConnected:!!s.provider.wallet.publicKey,userTickets:null===f||void 0===f?void 0:f.tickets}),Object(A.jsx)("div",{className:i.spacer}),Object(A.jsx)("div",{className:i.actionSectionContainer,children:Object(A.jsx)("div",{className:i.actionSection,children:Object(A.jsx)(Te,{raffle:t,userPubkey:s.provider.wallet.publicKey,entrant:f,entrantWinningTickets:h,scrollRef:o})})}),Object(A.jsx)("div",{className:i.spacer}),Object(A.jsx)(m.a,{variant:"overline",children:"Results"}),Object(A.jsx)(Je,{raffle:t,entrantWinningTickets:h,winningTickets:j,claimPrize:b,scrollRef:o}),Object(A.jsx)("div",{className:i.spacer})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:i.topSection,children:Object(A.jsxs)("div",{className:i.raffleTitle,children:[Object(A.jsx)("div",{className:i.leftTitleSection,children:Object(A.jsx)(k.a,{size:"medium",className:i.backButton,onClick:function(){return c(d.a.RAFFLES)},children:Object(A.jsx)(he.a,{className:i.backButtonIcon})})}),Object(A.jsxs)("div",{className:i.middleTitleSection,children:[Object(A.jsx)(m.a,{variant:"h1",children:"> ".concat(t.metadata.name)}),Object(A.jsx)(w.a,{title:t.endTimestamp.toString(),placement:"bottom",children:Object(A.jsx)(m.a,{variant:"h1",className:i.raffleSubtitle,children:"[ended]"})})]}),Object(A.jsx)("div",{className:i.rightTitleSection})]})}),Object(A.jsxs)("div",{className:i.mainContent,children:[Object(A.jsxs)("div",{className:i.prizesSection,children:[Object(A.jsxs)(m.a,{variant:"overline",children:["Prizes",t.prizes.length>3&&Object(A.jsxs)(A.Fragment,{children:[" -",Object(A.jsxs)(le.a,{variant:"text",disableRipple:!0,className:i.seeAllPrizesButton,onClick:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},children:["See all ",t.prizes.length]})]})]}),Object(A.jsx)($e,{raffle:t,winningTickets:j})]}),Object(A.jsxs)("div",{className:i.detailsSection,children:[Object(A.jsx)(ze,{raffle:t,userConnected:!!s.provider.wallet.publicKey,userTickets:null===f||void 0===f?void 0:f.tickets}),Object(A.jsx)("div",{className:i.actionSectionContainer,children:Object(A.jsx)("div",{className:i.actionSection,children:Object(A.jsx)(Te,{raffle:t,userPubkey:s.provider.wallet.publicKey,entrant:f,entrantWinningTickets:h,scrollRef:o})})})]})]}),Object(A.jsxs)("div",{className:i.prizeGallerySection,children:[Object(A.jsx)(xe.a,{className:i.scrollIcon}),Object(A.jsx)(Je,{raffle:t,entrantWinningTickets:h,winningTickets:j,claimPrize:b,scrollRef:o})]})]}),Object(A.jsx)("div",{className:i.spacer})]}):null},nt=function(e){var t=Object(u.f)().push;return Object(A.jsx)(se.a,{onBackNavigation:function(){return t(d.a.RAFFLES)},children:Object(A.jsx)(tt,Object(x.a)({},e))})},at=Object(I.a)((function(e){return{root:function(e){var t=e.device;return{height:t===K.a.Phone?"25vw":"260px",width:t===K.a.Phone?"100%":"200px",position:"relative",cursor:"pointer","&:hover":{boxShadow:"0 3px 10px 0 #111",transform:"scale3d(1.02, 1.02, 1)"},"&:active":{transform:"scale3d(1, 1, 1)"},display:"flex",flexDirection:t===K.a.Phone?"row":"column",justifyContent:t===K.a.Phone?"flex-start":"center"}},media:function(e){var t=e.device;return Object(x.a)({},t===K.a.Phone?{width:"25vw",height:"25vw"}:{height:"200px"})},prizeInfo:function(e){var t=e.device;return{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:t===K.a.Phone?"baseline":"center",fontSize:(K.a.Phone,"15px"),padding:t===K.a.Phone?" 8px":"8px"}},prizeNameRow:function(t){var n=t.device;return{width:"100%",display:"flex",flexDirection:"row",color:e.palette.primary.main,fontWeight:"bold",textTransform:"uppercase",alignItems:"center",justifyContent:n===K.a.Phone?"left":"center",textAlign:n===K.a.Phone?"left":"center"}},prizeName:{marginLeft:"5px",color:e.palette.primary.main},cardBadge:{fontSize:"12px",fontWeight:"bold",width:"70px",textAlign:"center",padding:"2px",position:"absolute",top:"5px",right:"5px",color:"white",backgroundColor:e.palette.primary.main,borderRadius:"2px",boxShadow:"0 2px 6px 0 #000"}}})),rt=function(e){var t=e.prize,n=e.index,r=e.className,i=Object(O.a)(e,["prize","index","className"]),c=Object(E.a)().device,s=at({device:c}),o=Object(a.useState)(!1),l=Object(f.a)(o,2),u=l[0],d=l[1],p=Object(a.useState)(!1),j=Object(f.a)(p,2),b=j[0],h=j[1],w=t.meta.imageUri,k=Object(a.useMemo)((function(){return c===K.a.Phone?14:18}),[c]);return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Ze,{isOpen:b,setIsOpen:h,prize:t,prizeRank:n}),Object(A.jsxs)(g.a,Object(x.a)(Object(x.a)({onClick:function(){h(!0)}},i),{},{className:"".concat(s.root," ").concat(r),children:[!u&&Object(A.jsx)("div",{children:Object(A.jsx)(S.a,{variant:"rect",animation:"wave",classes:{root:s.media}})}),Object(A.jsx)(v.a,{component:"img",classes:{root:s.media},src:w,alt:t.mint.name,style:u?{}:{display:"none"},onLoad:function(){return d(!0)}}),Object(A.jsx)(y.a,{className:s.prizeInfo,children:Object(A.jsxs)("div",{className:s.prizeNameRow,children:[Object(A.jsx)(m.a,{variant:"body1",children:void 0!==n&&"#".concat(n+1," ")}),Object(A.jsx)(m.a,{variant:"body1",className:s.prizeName,children:Object(A.jsx)(Le,{message:t.mint.name,maxCharLength:k,addTooltip:!0})})]})})]}))]})},it=Object(I.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},prizesGrid:{display:"flex",flexGrow:"initial",width:"100%"},prizeItem:{margin:"0 5px 30px 5px"},claimButtonContainer:{marginTop:"20px"},claimButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",color:"white"}}})),ct=function(e){var t=e.prizes,n=Object(x.a)(Object(x.a)({},Se()),it());return 0===t.length?Object(A.jsx)("div",{className:n.root,children:"No prizes"}):1===t.length?Object(A.jsx)("div",{className:n.root,children:Object(A.jsx)(j.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:n.prizesGrid,children:Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(rt,{prize:t[0],className:n.prizeItem})})})}):2===t.length?Object(A.jsx)("div",{className:n.root,children:Object(A.jsxs)(j.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:n.prizesGrid,children:[Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(rt,{prize:t[0],index:0,className:n.prizeItem})}),Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(rt,{prize:t[1],className:n.prizeItem,index:1})})]})}):Object(A.jsx)("div",{className:n.root,children:Object(A.jsxs)(j.a,{container:!0,justifyContent:"space-evenly",direction:"row",className:n.prizesGrid,children:[Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(rt,{prize:t[0],index:0,className:n.prizeItem})}),Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(rt,{prize:t[1],className:n.prizeItem,index:1})}),Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(rt,{prize:t[2],className:n.prizeItem,index:2})})]})})},st=n(760),ot=n(824),lt=n(799),ut=n(810),dt=n(813),pt=n(158),ft=n(92),mt=function(e,t,n){return e.muln(t).mul(n.dispenserPriceIn).div(n.dispenserPriceOut)},jt=function(){var e=Object(G.a)(W.a.mark((function e(t,n,a,r,i,c){var s,o,l,u,d,p;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.Token.getAssociatedTokenAddress(Oe.ASSOCIATED_TOKEN_PROGRAM_ID,Oe.TOKEN_PROGRAM_ID,i.mint.publicKey,t.provider.wallet.publicKey);case 2:if(o=e.sent,l=o,u=[],i.mint.publicKey.toBase58()===ft.c&&(c||u.push(Object(z.a)(new U.c(ft.c),o,t.provider.wallet.publicKey)),u.push(U.f.transfer({fromPubkey:t.provider.wallet.publicKey,toPubkey:o,lamports:mt(a.proceeds.ticketPrice,r,i).toNumber()})),u.push(Oe.Token.createSyncNativeInstruction(Oe.TOKEN_PROGRAM_ID,o))),i.mint.publicKey.toString()===a.proceeds.mint.publicKey.toString()){e.next=14;break}return d=mt(a.proceeds.ticketPrice,r,i),console.log("Swapping ".concat(d.toString()," ").concat(i.mint.symbol," for ").concat(a.proceeds.ticketPrice.muln(r).toString()," ").concat(a.proceeds.mint.symbol)),e.next=11,Oe.Token.getAssociatedTokenAddress(Oe.ASSOCIATED_TOKEN_PROGRAM_ID,Oe.TOKEN_PROGRAM_ID,a.proceeds.mint.publicKey,t.provider.wallet.publicKey);case 11:p=e.sent,u.push(n.instruction.swap(a.proceeds.ticketPrice.muln(r),{accounts:{registry:X.b,swapper:n.provider.wallet.publicKey,vaultTokenIn:pt.b,vaultTokenOut:pt.c,buyerTokenInAccount:o,buyerTokenOutAccount:p,tokenProgram:Oe.TOKEN_PROGRAM_ID}})),l=p;case 14:return u.push(t.instruction.buyTickets(r,{accounts:{raffle:a.publicKey,entrants:a.entrantsAccountAddress,proceeds:a.proceeds.address,buyerTokenAccount:l,buyerTransferAuthority:t.provider.wallet.publicKey,tokenProgram:Oe.TOKEN_PROGRAM_ID}})),e.next=17,t.provider.send((s=new U.g).add.apply(s,u));case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,c){return e.apply(this,arguments)}}(),bt=function(e){var t=e.children,n=Object(O.a)(e,["children"]);return Object(A.jsx)(le.a,Object(x.a)(Object(x.a)({},n),{},{children:t}))},ht=Object(I.a)((function(e){return{root:{padding:"15px 20px 15px 20px"},titleSection:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",marginBottom:"15px"},amountLabel:{width:"100%",display:"flex"},ticketAmountSection:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",textAlign:"center",marginBottom:"15px"},ticketAmountSectionLeft:{width:"15%",display:"flex",flexDirection:"row",justifyContent:"flex-start"},ticketAmountSectionMiddle:{width:"65%",display:"flex",flexDirection:"row",justifyContent:"center"},ticketAmountSectionRight:{width:"15%",display:"flex",flexDirection:"row",justifyContent:"flex-end"},changeTicketAmountButton:{color:e.palette.primary.main},ticketAmountTextField:{width:"100%",height:"100%","& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{},"&:hover .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:e.palette.primary.main},"& .MuiOutlinedInput-input":{color:e.palette.common.white,textAlign:"center",fontSize:"15px"},"& .MuiOutlinedInput-adornedStart":{paddingLeft:"8px"},"& .MuiOutlinedInput-adornedEnd":{paddingRight:"8px"}},maxButton:{color:e.palette.primary.main,fontSize:"15px",width:"30px",minWidth:"30px",padding:0,"&:hover":{backgroundColor:"transparent"}},priceSection:{width:"100%",height:"80px",display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:"10px"},priceLabel:{margin:"-5px 0 -5px 0",display:"flex",flexDirection:"column",alignItems:"center"},paymentOptionSection:{width:"100%",display:"flex"},basketPrice:{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"baseline"},paymentOptionSelect:{width:"100%",height:"50px",marginTop:"-10px",padding:"0",display:"flex",flexDirection:"row",justifyContent:"flex-start"},paymentOptionSelection:{padding:"0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},paymentOptionMenu:{padding:"0 10px 0 0",margin:"5px 10px 5px 10px",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},paymentOptionLogoContainer:{height:"30px",width:"30px",margin:"5px 10px 5px 10px",display:"flex",flexDirection:"row",justifyContent:"center"},paymentOptionLogo:{height:"100%",borderRadius:"50%"},buySection:{width:"100%",display:"flex",flexDirection:"column"},purchaseButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},purchaseButtonContentLeft:{width:"20%",display:"flex",justifyContent:"center"},purchaseButtonContentMiddle:{width:"60%"},purchaseButtonContentRight:{width:"20%"},purchaseSpinner:{height:"50px",color:e.palette.secondary.main},walletBalance:{marginTop:"5px",fontSize:"12px",color:"#777",textAlign:"left"}}})),xt=1e3,Ot=function(e){return(null!==e&&void 0!==e?e:0)>=5},gt=function(e){var t=e.raffle,n=e.updateRaffle,r=Object(x.a)(Object(x.a)({},Se()),ht()),i=J(),c=i.draffleClient,s=i.dispenserClient,o=Object(a.useState)(!1),u=Object(f.a)(o,2),d=u[0],j=u[1],h=Object(a.useState)(),O=Object(f.a)(h,2),g=O[0],v=O[1],y=Object(a.useMemo)((function(){return{mint:t.proceeds.mint,dispenserPriceIn:new Oe.u64(1),dispenserPriceOut:new Oe.u64(1)}}),[t]),w=Object(a.useState)(y),S=Object(f.a)(w,2),N=S[0],C=S[1],T=Object(a.useState)({mint:t.proceeds.mint.publicKey,amount:void 0}),M=Object(f.a)(T,2),I=M[0],P=M[1],R=Object(a.useState)(1),B=Object(f.a)(R,2),E=B[0],D=B[1],K=Object(a.useState)([]),L=Object(f.a)(K,2),F=L[0],_=L[1],V=Object(a.useMemo)((function(){return(t.metadata.alternatePurchaseMints||[]).reduce((function(e,n){if(!ft.b.has(n.toString()))return console.log("Mint ".concat(n.toString()," not found in token registry")),e;var a=F.find((function(e){return e.account.mintTokenOut.toString()===t.proceeds.mint.publicKey.toString()&&e.account.mintTokenIn.toString()===n.toString()}));if(!a)return e;var r=ft.b.get(n.toString());return e.set(n.toString(),{mint:{name:r.name,publicKey:n,logoUrl:r.logoURI,symbol:r.symbol,decimals:r.decimals},dispenserPriceIn:a.account.rateTokenIn,dispenserPriceOut:a.account.rateTokenOut}),e}),new Map([[t.proceeds.mint.publicKey.toString(),{mint:t.proceeds.mint,dispenserPriceIn:new Oe.u64(1),dispenserPriceOut:new Oe.u64(1)}]]))}),[t,F]),H=Object(a.useCallback)((function(e){return mt(t.proceeds.ticketPrice,e,N)}),[t.proceeds.ticketPrice,N]);Object(a.useEffect)((function(){s.account.registry.all().then(_)}),[s,_]),Object(a.useEffect)((function(){var e;if(null===(e=c.provider.wallet)||void 0===e?void 0:e.publicKey){var t,n=function(){var e=Object(G.a)(W.a.mark((function e(){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.e)(c.provider);case 2:n=e.sent,v(n),Ot(g)&&N.mint.publicKey.toBase58()!==ft.c&&clearInterval(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n(),t=setInterval((function(){n()}),5e3),function(){return clearInterval(t)}}}),[g,c.provider,c.provider.wallet.publicKey,N.mint.publicKey]),Object(a.useEffect)((function(){if(c.provider.wallet.publicKey){var e=setInterval((function(){t()}),5e3);return t(),function(){return clearInterval(e)}}function t(){return n.apply(this,arguments)}function n(){return(n=Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.t1=N.mint.publicKey,e.next=4,Object(z.c)(c.provider,N.mint.publicKey);case 4:e.t2=e.sent,e.t3={mint:e.t1,amount:e.t2},(0,e.t0)(e.t3);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[c.provider,c.provider.wallet,N.mint.publicKey]);var Z=Object(a.useMemo)((function(){return Ot(g)}),[g]),X=Object(a.useMemo)((function(){return N.mint.publicKey.toBase58()===ft.c?{mint:new U.c(ft.c),amount:new Oe.u64(null!==g&&void 0!==g?g:0)}:I}),[g,I,N.mint.publicKey]),q=Object(a.useMemo)((function(){var e;return(null===(e=X.amount)||void 0===e?void 0:e.gte(H(E)))&&Z}),[X,Z,E,H]),Y=Object(a.useMemo)((function(){if(!X.amount)return new Oe.u64(0);var e=X.amount.mul(N.dispenserPriceOut).div(N.dispenserPriceIn).div(t.proceeds.ticketPrice);return N.mint.publicKey.toString()===X.mint.toString()&&e.ltn(E)&&D(e.toNumber()),e}),[X,N]);Object(a.useEffect)((function(){var e=0===E?1:E;Math.min(E,Y.toNumber()),D(e)}),[Y,E,D]);var Q=Object(a.useMemo)((function(){var e;return(null===(e=X.amount)||void 0===e?void 0:e.gte(H(E+1)))&&Z}),[X,Z,E,H]),$=Object(a.useCallback)(Object(G.a)(W.a.mark((function e(){var a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),a=void 0!==I.amount,e.next=5,jt(c,s,t,E,N,a);case 5:return D(1),e.next=8,Object(be.sleep)(500);case 8:n(),l.b.success("You bought ".concat(E," ticket(s)")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.msg?l.b.error("Transaction failed: ".concat(e.t0.msg)):l.b.error("Unexpected error");case 15:j(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),[c,s,t,E,N,I,D,n]);return Object(A.jsxs)("div",{className:"".concat(r.actionSection," ").concat(r.root),children:[Object(A.jsx)(m.a,{variant:"h3",className:r.titleSection,children:"Purchase Tickets"}),Object(A.jsx)("div",{className:r.amountLabel,children:Object(A.jsx)(m.a,{variant:"overline",children:"Amount"})}),Object(A.jsxs)("div",{className:r.ticketAmountSection,children:[Object(A.jsx)("div",{className:r.ticketAmountSectionLeft,children:Object(A.jsx)(k.a,{size:"small",onClick:function(){return D((function(e){return Math.max(e-1,1)}))},disabled:E<=1,className:r.changeTicketAmountButton,children:Object(A.jsx)(ut.a,{style:{fontSize:30}})})}),Object(A.jsx)("div",{className:r.ticketAmountSectionMiddle,children:Object(A.jsx)(st.a,{size:"small",variant:"outlined",className:r.ticketAmountTextField,value:E,onChange:function(e){var n=e.target.value;if(""===n||/^[0-9\b]+$/.test(n)){var a=Math.min(Math.min(Number(n),xt-t.totalTickets),Y.toNumber());D(a)}},InputProps:{endAdornment:Object(A.jsx)(bt,{size:"small",variant:"text",disableRipple:!0,className:r.maxButton,onClick:function(){var e=Math.min(xt-t.totalTickets,Y.toNumber());D(e)},children:"MAX"}),startAdornment:Object(A.jsx)(bt,{size:"small",variant:"text",disableRipple:!0,className:r.maxButton,onClick:function(){return D(1)},children:"MIN"})}})}),Object(A.jsx)("div",{className:r.ticketAmountSectionRight,children:Object(A.jsx)(k.a,{size:"small",onClick:function(){return D((function(e){return e+1}))},disabled:t.totalTickets+E>=ee.a||!Q||E+1>xt-t.totalTickets,className:r.changeTicketAmountButton,children:Object(A.jsx)(dt.a,{style:{fontSize:30}})})})]}),Object(A.jsx)("div",{className:r.priceSection,children:Object(A.jsxs)("div",{className:r.paymentOptionSection,children:[Object(A.jsxs)("div",{className:r.basketPrice,children:[Object(A.jsx)(m.a,{variant:"overline",children:"Total Price"}),Object(A.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:Object(A.jsx)(m.a,{variant:"h4",children:Object(z.d)(H(E),N.mint)})})]}),Object(A.jsxs)("div",{className:r.basketPrice,children:[Object(A.jsx)(m.a,{variant:"overline",children:"Currency"}),1===V.size?Object(A.jsxs)("div",{className:r.paymentOptionSelection,children:[Object(A.jsx)(m.a,{variant:"h4",children:t.proceeds.mint.symbol}),Object(A.jsx)("div",{className:r.paymentOptionLogoContainer,children:Object(A.jsx)("img",{className:r.paymentOptionLogo,src:t.proceeds.mint.logoUrl,alt:"Logo for ".concat(t.proceeds.mint.name)})})]}):Object(A.jsxs)(ot.a,{variant:"standard",label:"Purchase mint",value:N.mint.publicKey.toString(),onChange:function(e){return C(V.get(e.target.value))},className:r.paymentOptionSelect,MenuProps:{disableScrollLock:!0},renderValue:function(e){var t=V.get(e);return Object(A.jsxs)("div",{className:r.paymentOptionSelection,children:[Object(A.jsx)(m.a,{variant:"h4",children:t.mint.symbol}),Object(A.jsx)("div",{className:r.paymentOptionLogoContainer,children:Object(A.jsx)("img",{className:r.paymentOptionLogo,src:t.mint.logoUrl,alt:"Logo for ".concat(t.mint.name)})})]})},children:[Object(A.jsx)(lt.a,{value:"",disabled:!0,children:"Select purchase currency"}),Object(p.a)(V.values()).map((function(e){var t=e.mint;return Object(A.jsxs)(lt.a,{value:t.publicKey.toString(),classes:{root:r.paymentOptionMenu},children:[Object(A.jsx)("div",{className:r.paymentOptionLogoContainer,children:Object(A.jsx)("img",{className:r.paymentOptionLogo,src:t.logoUrl,alt:"Logo for ".concat(t.name)})}),Object(A.jsxs)(m.a,{variant:"body1",children:[Object(A.jsx)(Le,{message:t.name,maxCharLength:12})," (".concat(t.symbol,")")]})]},t.publicKey.toString())}))]})]})]})}),Object(A.jsxs)("div",{className:r.buySection,children:[Object(A.jsx)(bt,{variant:"contained",className:r.mainButton,onClick:$,disabled:0===E||t.totalTickets+E>ee.a||!q||d,children:Object(A.jsx)("div",{className:r.purchaseButtonContent,children:d?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:r.purchaseButtonContentLeft,children:Object(A.jsx)(b.a,{size:20,className:r.purchaseSpinner})}),Object(A.jsx)("div",{className:r.purchaseButtonContentMiddle,children:"Processing..."}),Object(A.jsx)("div",{className:r.purchaseButtonContentRight})]}):Object(A.jsxs)(A.Fragment,{children:["Buy ticket ",!Z&&"(Insufficient SOL)"]})})}),Object(A.jsxs)("div",{className:r.walletBalance,children:["Wallet balance:"," ",X?Object(z.d)(X.amount||new Oe.u64(0),N.mint):0," ",N.mint.symbol]})]})]})},vt=Object(I.a)((function(e){return{root:{width:"100%",height:"inherit",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},actionTagline:{width:"100%",marginBottom:"20px"},textHighlight:{fontWeight:"bold",color:e.palette.secondary.main,marginBottom:"10px"},topSection:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},raffleTitle:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center",justifyItems:"space-between"},leftTitleSection:{width:"10%",display:"flex"},middleTitleSection:{width:"90%",display:"flex",justifyContent:"center",textAlign:"center"},rightTitleSection:{width:"10%"},backButton:{color:e.palette.common.black,backgroundColor:Object(ke.a)(e.palette.secondary.main,.8),"&:hover":{boxShadow:"0px 0px 5px ".concat(e.palette.secondary.main,", inset 0px 0px 5px ").concat(e.palette.secondary.main),backgroundColor:Object(ke.a)(e.palette.secondary.main,.8)}},countdown:function(t){return{width:"100%",display:"flex",justifyContent:"center",marginTop:"10px",fontSize:t.device===K.a.Phone?"32px":"60px",color:"white",WebkitTextStrokeWidth:"1px",WebkitTextStrokeColor:e.palette.secondary.main,textShadow:"0 0 10px ".concat(e.palette.secondary.main)}},mainContent:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-end"},prizesSection:{width:"70%",display:"flex",flexDirection:"column",paddingRight:"20px",minHeight:"450px",justifyContent:"center",alignItems:"center"},prizesHeader:{marginBottom:"10px"},labelPrizeAmount:{marginLeft:"5px",color:e.palette.secondary.main,textTransform:"initial","&:hover":{textShadow:"0px 0px 5px ".concat(e.palette.secondary.main),backgroundColor:"transparent",textDecoration:"none"}},seeAllPrizesLabel:{},detailsSection:function(e){var t=e.device;return{paddingTop:"20px",display:"flex",flexDirection:"column",justifyContent:"space-evenly",width:"30%",minWidth:t===K.a.Phone?"256px":"313px",maxWidth:(K.a.Phone,"380px"),maxHeight:"500px"}},actionSectionContainer:{padding:"20px 0 20px 0"},actionSectionInner:{padding:"10px 0",width:"90%",textAlign:"center"},connectToBuyButton:{width:"80%",height:"40px"},scrollIcon:{color:e.palette.common.white,transform:"rotate(90deg)",fontSize:"50px",opacity:"0.6",marginTop:"20px",marginBottom:"60px"},spacer:{width:"100%",height:"20px"}}})),yt=Object(I.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},prizesGrid:{scrollMargin:"130px",display:"flex",width:"100%",marginTop:"5px"},prizeItem:function(e){return{marginBottom:e.device===K.a.Phone?"10px":"30px"}}}})),wt=function(e){var t=e.raffle,n=e.scrollRef,r=Object(E.a)().device,i=Object(x.a)(Object(x.a)({},Se()),yt({device:r}));return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(A.jsx)("div",{className:i.root,children:Object(A.jsx)(j.a,{ref:n,container:!0,justifyContent:"space-between",direction:r===K.a.Phone?"column":"row",className:i.prizesGrid,children:t.prizes.map((function(e,t){return Object(A.jsx)(j.a,{item:!0,children:Object(A.jsx)(rt,{className:i.prizeItem,prize:e,index:t},t)})}))})})},kt=function(e){var t,n=e.raffle,r=e.updateRaffle,i=Object(E.a)().device,c=Object(x.a)(Object(x.a)({},Se()),vt({device:i})),s=Object(u.f)().push,o=J().draffleClient,l=Object(a.useRef)(null),p=Object(a.useMemo)((function(){var e;if(null===(e=o.provider.wallet)||void 0===e?void 0:e.publicKey)return null===n||void 0===n?void 0:n.entrants.get(o.provider.wallet.publicKey.toString())}),[n,null===(t=o.provider.wallet)||void 0===t?void 0:t.publicKey]);return n?Object(A.jsx)("div",{className:c.root,children:i===K.a.Phone?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"h1",children:"> ".concat(n.metadata.name)}),Object(A.jsx)("div",{className:c.countdown,children:Object(A.jsx)(R,{endTimestamp:n.endTimestamp,spacing:"5%"})}),Object(A.jsx)(ze,{raffle:n,userConnected:!!o.provider.wallet.publicKey,userTickets:null===p||void 0===p?void 0:p.tickets}),Object(A.jsx)("div",{className:c.spacer}),Object(A.jsx)(m.a,{variant:"overline",children:"Prizes"}),Object(A.jsx)(wt,{raffle:n,scrollRef:l}),Object(A.jsx)("div",{className:c.spacer}),o.provider.wallet.publicKey?Object(A.jsx)(gt,{raffle:n,updateRaffle:r}):Object(A.jsx)(St,{}),Object(A.jsx)("div",{className:c.spacer})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:c.topSection,children:[Object(A.jsxs)("div",{className:c.raffleTitle,children:[Object(A.jsx)("div",{className:c.leftTitleSection,children:Object(A.jsx)(k.a,{size:"medium",className:c.backButton,onClick:function(){return s(d.a.RAFFLES)},children:Object(A.jsx)(he.a,{})})}),Object(A.jsx)("div",{className:c.middleTitleSection,children:Object(A.jsx)(m.a,{variant:"h1",children:"> ".concat(n.metadata.name)})}),Object(A.jsx)("div",{className:c.rightTitleSection})]}),Object(A.jsx)("div",{className:c.countdown,children:Object(A.jsx)(R,{endTimestamp:n.endTimestamp,spacing:"5%"})})]}),Object(A.jsxs)("div",{className:c.mainContent,children:[Object(A.jsxs)("div",{className:c.prizesSection,children:[Object(A.jsxs)(m.a,{variant:"overline",className:c.prizesHeader,children:["Prizes",n.prizes.length>3&&Object(A.jsxs)(A.Fragment,{children:[" -",Object(A.jsx)(le.a,{className:c.labelPrizeAmount,variant:"text",disableRipple:!0,onClick:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})},children:Object(A.jsxs)("span",{children:["See all ",n.prizes.length]})})]})]}),Object(A.jsx)(ct,{prizes:n.prizes})]}),Object(A.jsxs)("div",{className:c.detailsSection,children:[Object(A.jsx)(ze,{raffle:n,userConnected:!!o.provider.wallet.publicKey,userTickets:null===p||void 0===p?void 0:p.tickets}),Object(A.jsx)("div",{className:c.actionSectionContainer,children:o.provider.wallet.publicKey?Object(A.jsx)(gt,{raffle:n,updateRaffle:r}):Object(A.jsx)(St,{})})]})]}),n.prizes.length>3&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(xe.a,{className:c.scrollIcon}),Object(A.jsx)(wt,{raffle:n,scrollRef:l})]})]})}):null},St=function(){var e=Object(E.a)().device,t=Object(x.a)(Object(x.a)({},Se()),vt({device:e}));return Object(A.jsx)("div",{className:t.actionSection,children:Object(A.jsxs)("div",{className:t.actionSectionInner,children:[Object(A.jsxs)("div",{className:t.actionTagline,children:[Object(A.jsx)(m.a,{variant:"h3",className:t.textHighlight,children:"Tickets are still available."}),Object(A.jsx)(m.a,{variant:"body1",children:"Don't miss out!"})]}),Object(A.jsx)(ye.b,{variant:"outlined",color:"secondary",className:"".concat(t.mainButton," ").concat(t.connectToBuyButton),children:"Connect to buy"})]})})},Nt=function(e){var t=Object(u.f)().push;return Object(A.jsx)(se.a,{onBackNavigation:function(){return t(d.a.RAFFLES)},children:Object(A.jsx)(kt,Object(x.a)({},e))})},Ct=function(){var e=Object(u.h)().id,t=ce(),n=t.raffles,r=t.updateRaffleById,i=Object(a.useState)(),c=Object(f.a)(i,2),s=c[0],o=c[1],l=Object(a.useCallback)((function(){r&&r(e)}),[e,r]);Object(a.useEffect)((function(){l();var e=setInterval(l,5e3);return function(){return clearInterval(e)}}),[l]),Object(a.useEffect)((function(){n.has(e)&&o(n.get(e))}),[n,e]);var d=Object(a.useMemo)((function(){return s&&new Date>s.endTimestamp}),[s]);return s?d?Object(A.jsx)(nt,{raffle:s,updateRaffle:l}):Object(A.jsx)(Nt,{raffle:s,updateRaffle:l}):null},Tt=n(814),Mt=n.p+"static/media/discord-logo.9a823ca6.svg",It=n.p+"static/media/twitter-logo.8097ca9d.svg",Pt=n.p+"static/media/document-logo.34b02245.svg",At=Object(I.a)((function(e){return{root:function(e){return{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",margin:e.device===K.a.Phone?"20px 0":"-20px 0"}},socialLinksContainer:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:"30px"},socialLinkContainer:function(e){return{height:"50px",width:"80px",margin:e.device===K.a.Phone?"0 5px":"0 20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},socialLink:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},buttonContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"30px",width:"250px"}}}));n(594);var Rt,zt=function(){var e=Object(E.a)().device,t=Object(x.a)(Object(x.a)({},Se()),At({device:e})),n=Object(u.f)().push;return Object(A.jsxs)("div",{className:t.root,children:[Object(A.jsx)("img",{className:e===K.a.Phone?"banner-small":"banner",src:"dRaffle-LC-banner.png",alt:"Site banner",width:e===K.a.Phone?"280px":"600px"}),Object(A.jsxs)("div",{className:t.socialLinksContainer,children:[Object(A.jsx)("div",{className:t.socialLinkContainer,children:Object(A.jsx)(w.a,{title:"Discord",placement:"top",children:Object(A.jsx)(Tt.a,{className:t.socialLink,target:"blank",href:"https://t.co/BtbE5rb6Bk?amp=1",children:Object(A.jsx)("img",{src:Mt,alt:"disord-logo",width:"50px"})})})}),Object(A.jsx)("div",{className:t.socialLinkContainer,children:Object(A.jsx)(w.a,{title:"Twitter",placement:"top",children:Object(A.jsx)(Tt.a,{className:t.socialLink,target:"blank",href:"https://twitter.com/draffleluckclub",children:Object(A.jsx)("img",{src:It,alt:"twitter-logo",width:"50px"})})})}),Object(A.jsx)("div",{className:t.socialLinkContainer,children:Object(A.jsx)(w.a,{title:"Litepaper",placement:"top",children:Object(A.jsx)(Tt.a,{className:t.socialLink,target:"blank",href:"dRaffle-litepaper.pdf",children:Object(A.jsx)("img",{src:Pt,alt:"document-logo",width:"50px"})})})})]}),Object(A.jsx)("div",{className:t.buttonContainer,children:Object(A.jsx)(le.a,{variant:"outlined",color:"secondary",size:"large",onClick:function(){return n(d.a.RAFFLES)},className:t.mainButton,children:"Explore raffles"})})]})},Bt=function(){return Object(A.jsx)(se.a,{children:Object(A.jsx)(zt,{})})},Et=n(480),Dt=n(815),Kt=n(87),Lt=n.n(Kt),Ft=n(197),Wt=Object(I.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",width:"100%"},raffleGrid:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},raffleGridItem:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},raffleCard:{width:"180px",height:"150px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},walletButtonContainer:{margin:"20px 0 0 0"}}})),Gt=function(){var e=Wt(),t=Object(h.e)().connected,n=Object(u.f)().push,r=ce(),i=r.raffles,c=r.fetchAllRaffles,s=J().dispenserClient,o=Object(a.useState)([]),l=Object(f.a)(o,2),b=l[0],x=l[1];return Object(a.useEffect)((function(){c(!0)}),[c]),Object(a.useEffect)((function(){s.account.registry.all().then(x)}),[s,x]),Object(A.jsx)("div",{className:e.root,children:t?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[Object(A.jsx)(m.a,{variant:"h3",children:"Dispensers"}),Object(A.jsx)(k.a,{size:"small",onClick:function(){s.rpc.createRegistry(new Lt.a(5e8),new Lt.a(1e6),{accounts:{registry:X.b,vaultTokenIn:pt.b,vaultTokenOut:pt.c,admin:s.provider.wallet.publicKey,mintTokenIn:new U.c("So11111111111111111111111111111111111111112"),mintTokenOut:new U.c("zRpVjG5wMWrNhpTtSiGMz9iBaMTQDdaVGCFLmYqCs4U"),tokenProgram:Oe.TOKEN_PROGRAM_ID,systemProgram:U.f.programId,rent:U.e},signers:[X.c]}).then((function(e){return console.log(e)}))},children:Object(A.jsx)(Dt.a,{className:e.scrollButtonIcon})})]}),Object(A.jsx)(He,{height:"20px"}),0===b.length?Object(A.jsx)(A.Fragment,{children:"No dispenser found."}):Object(A.jsx)(j.a,{container:!0,spacing:1,className:e.raffleGrid,children:b.map((function(t){return Object(A.jsx)(j.a,{item:!0,xs:3,spacing:3,className:e.raffleGridItem,children:Object(A.jsxs)(g.a,{className:e.raffleCard,children:[Object(A.jsxs)(m.a,{children:["Admin: ",Object(M.c)(t.account.admin)]}),Object(A.jsxs)(m.a,{children:["In: ",Object(M.c)(t.account.mintTokenIn)]}),Object(A.jsxs)(m.a,{children:["->"," Vault:"," ",Object(M.c)(t.account.vaultTokenIn)]}),Object(A.jsxs)(m.a,{children:["Out: ",Object(M.c)(t.account.mintTokenOut)]}),Object(A.jsxs)(m.a,{children:["->"," Vault:"," ",Object(M.c)(t.account.vaultTokenOut)]})]})},t.publicKey.toString())}))}),Object(A.jsx)(He,{height:"20px"}),Object(A.jsx)(m.a,{variant:"h3",children:"Ongoing raffles"}),Object(A.jsx)(He,{height:"20px"}),Object(A.jsx)(j.a,{container:!0,spacing:1,className:e.raffleGrid,children:Object(p.a)(i.values()).filter((function(e){return new Date<=e.endTimestamp})).map((function(t){return Object(A.jsx)(j.a,{item:!0,xs:3,spacing:3,className:e.raffleGridItem,children:Object(A.jsxs)(g.a,{className:e.raffleCard,onClick:function(){return n("".concat(d.a.ADMIN.RAFFLES,"/").concat(t.publicKey))},children:[Object(A.jsx)(m.a,{children:t.metadata.name}),Object(A.jsx)(m.a,{children:Object(A.jsx)(m.a,{children:t.endTimestamp.toISOString()})})]})})}))}),Object(A.jsx)(He,{height:"50px"}),Object(A.jsx)(m.a,{variant:"h3",children:"Ended raffles"}),Object(A.jsx)(He,{height:"20px"}),Object(A.jsx)(j.a,{container:!0,spacing:1,className:e.raffleGrid,children:Object(p.a)(i.values()).filter((function(e){return new Date>e.endTimestamp})).map((function(t){return Object(A.jsx)(j.a,{item:!0,xs:3,spacing:3,className:e.raffleGridItem,children:Object(A.jsxs)(g.a,{className:e.raffleCard,onClick:function(){return n("".concat(d.a.ADMIN.RAFFLES,"/").concat(t.publicKey))},children:[Object(A.jsx)(m.a,{children:t.metadata.name}),Object(A.jsx)(m.a,{children:t.endTimestamp.toISOString()})]})},t.publicKey.toString())}))})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{variant:"h3",children:"Connect with an admin wallet to unlock admin panel"}),Object(A.jsx)("div",{className:e.walletButtonContainer,children:Object(A.jsx)(Ft.a,{})})]})})},Ut=function(){return Object(A.jsx)(se.a,{children:Object(A.jsx)(Gt,{})})},_t=n(816),Vt=Object(I.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",width:"100%"},headerContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},entrantRow:{display:"flex",flexDirection:"row",justifyContent:"center"},walletButtonContainer:{margin:"20px 0 0 0"}}})),Ht=function(){var e=Vt(),t=Object(u.h)().id,n=ce(),r=n.raffles,i=n.updateRaffleById,c=J().draffleClient,s=Object(a.useState)(),o=Object(f.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(!1),b=Object(f.a)(j,2),h=b[0],x=b[1];Object(a.useEffect)((function(){var e=r.get(t);e&&d(e)}),[r,t]);var O=Object(a.useCallback)(Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.b)((function(){return c.rpc.revealWinners({accounts:{raffle:t,recentBlockhashes:U.d}})}),"Raffle revealed");case 2:case"end":return e.stop()}}),e)}))),[c,t]);return h?Object(A.jsx)("div",{className:e.root,children:Object(A.jsx)(m.a,{variant:"h3",children:"Loading..."})}):l?Object(A.jsxs)("div",{className:e.root,children:[l?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:e.headerContainer,children:[Object(A.jsxs)(m.a,{variant:"h3",children:["Entrants list (total ",l.entrants.size,")"]}),Object(A.jsx)(k.a,{onClick:function(){x(!0),i(t),x(!1)},children:Object(A.jsx)(_t.a,{})}),Object(A.jsx)(le.a,{onClick:O,variant:"contained",children:"Reveal winners"})]}),Object(A.jsx)(He,{height:"20px"}),Object(p.a)(l.entrants.entries()).map((function(t){var n=Object(f.a)(t,2),a=n[0],r=n[1];return Object(A.jsxs)("div",{className:e.entrantRow,children:[Object(A.jsxs)(m.a,{variant:"body1",children:[a,": "]}),Object(A.jsx)(m.a,{variant:"body1",children:r.tickets.toString()})]},a)}))]}):Object(A.jsx)(m.a,{variant:"h3",children:"No entrants"}),Object(A.jsx)(He,{height:"50px"})]}):null},Zt=function(){return Object(A.jsx)(se.a,{children:Object(A.jsx)(Ht,{})})},Xt=n(758),qt=Object(I.a)((function(e){return{root:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"justify"},titleSection:{width:"100%"},mainSection:{width:"100%",margin:"30px 0 30px 0",display:"flex",flexDirection:"row"},descriptionSection:{width:"55%",maxWidth:"600px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"baseline",textAlign:"justify"},cleanupSection:{width:"45%",maxWidth:"600px",height:"100%",padding:"0 20px 0 50px",display:"flex",flexDirection:"column",justifyContent:"flex-start"},media:{maxWidth:"200px",width:"100%"},accordionItem:{width:"100%"},accordionContent:{width:"100%",padding:"0 10px 0 10px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"baseline",textAlign:"justify"},highlightPrimary:{fontWeight:"bold",color:e.palette.primary.main},highlightSecondary:{fontWeight:"bold",color:e.palette.secondary.main},actionSectionInner:{padding:"10px 0",width:"90%",textAlign:"center"},actionTagline:{width:"100%",marginBottom:"20px"},connectToBuyButton:{width:"60%",height:"40px"},accountCount:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},accountSelection:{width:"100%",padding:"0 10px 10px 10px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},closeButton:{width:"90%",height:"30px"},orDivider:{margin:"20px 0 20px 0"},purchaseButtonContent:{display:"flex",flexDirection:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},purchaseButtonContentLeft:{width:"20%",display:"flex",justifyContent:"center"},purchaseButtonContentMiddle:{width:"60%"},purchaseButtonContentRight:{width:"20%"},purchaseSpinner:{height:"50px",color:e.palette.secondary.main},refreshButtonContainer:{margin:"2px 0 0 10px"},refreshButton:{width:"16px",height:"16px",color:e.palette.secondary.main}}})),Yt=function(){var e=Object(x.a)(Object(x.a)({},Se()),qt()),t=Object(u.f)().push;return Object(A.jsx)(se.a,{children:Object(A.jsxs)("div",{className:e.root,children:[Object(A.jsx)("div",{className:e.titleSection,children:Object(A.jsx)(m.a,{variant:"h1",children:"Solana tools"})}),Object(A.jsxs)("div",{style:{width:"50%",margin:"0 auto"},children:[Object(A.jsx)(Xt.a,{m:2,display:"flex",justifyContent:"center",children:Object(A.jsx)(le.a,{variant:"outlined",onClick:function(){return t(d.a.TOOLS.CLOSE_TA)},children:"Close token accounts"})}),Object(A.jsx)(Xt.a,{m:2,display:"flex",justifyContent:"center",children:Object(A.jsx)(le.a,{variant:"outlined",onClick:function(){return t(d.a.TOOLS.CLOSE_SA)},children:"Close Serum DEX accounts"})})]})]})})},Jt=n(15),Qt=n(828),$t=n(817),en=n(819),tn=n(818),nn=function(){var e=Object(G.a)(W.a.mark((function e(t,n,a){var r,i,c,s,o,l,u=arguments;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>3&&void 0!==u[3]?u[3]:[],e.next=3,t.getRecentBlockhash();case 3:return a.recentBlockhash=e.sent.blockhash,e.next=6,n(a);case 6:return a=e.sent,r.length>0&&(i=a).partialSign.apply(i,Object(p.a)(r)),c=a.serialize(),e.next=11,t.sendRawTransaction(c);case 11:s=e.sent,o=0;case 13:if(!(o<30)){e.next=24;break}return e.next=16,t.getSignatureStatus(s);case 16:if("confirmed"!==(null===(l=e.sent.value)||void 0===l?void 0:l.confirmationStatus)){e.next=19;break}return e.abrupt("return",s);case 19:return e.next=21,Object(M.d)(1e3);case 21:o++,e.next=13;break;case 24:throw new Error("Tx ".concat(s," has not been confirmed within 30 seconds"));case 25:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),an=function(){var e=Object(G.a)(W.a.mark((function e(t,n){var a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getParsedTokenAccountsByOwner(n,{programId:Oe.TOKEN_PROGRAM_ID});case 2:return a=e.sent.value,e.abrupt("return",a.map((function(e){var t=e.pubkey;return 0===e.account.data.parsed.info.tokenAmount.uiAmount?t.toBase58():void 0})).filter(Boolean));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rn=function(e,t){return Oe.Token.createCloseAccountInstruction(Oe.TOKEN_PROGRAM_ID,e,t,t,[])},cn=function(){var e=Object(x.a)(Object(x.a)({},Se()),qt());return Object(A.jsxs)(A.Fragment,{children:[" ",Object(A.jsxs)(Qt.a,{children:[Object(A.jsx)($t.a,{expandIcon:Object(A.jsx)(tn.a,{}),children:Object(A.jsx)(m.a,{variant:"h3",children:"What does it do?"})}),Object(A.jsx)(en.a,{children:Object(A.jsx)("div",{className:e.accordionContent,children:Object(A.jsxs)(m.a,{variant:"body1",children:["Sending your precious NFT to Grandma's wallet for her birthday, listing an NFT on a marketplace, or spending your last few USDC on one of our upcoming dRaffles are all ordinary actions that leave an empty account cluttering your wallet, sometimes forever... At the dRaffle Luck Club, we like to keep things tidy, which is why we`ve created this simple and nifty tool to help you clean these up and regain"," ",Object(A.jsx)("span",{className:e.highlightPrimary,children:"proper wallet feng shui."})]})})})]}),Object(A.jsxs)(Qt.a,{children:[Object(A.jsx)($t.a,{expandIcon:Object(A.jsx)(tn.a,{}),children:Object(A.jsx)(m.a,{variant:"h3",children:"Why should you care?"})}),Object(A.jsx)(en.a,{children:Object(A.jsx)("div",{className:e.accordionContent,children:Object(A.jsxs)("ol",{children:[Object(A.jsx)(m.a,{variant:"body1",children:Object(A.jsxs)("li",{children:['Although it is generally obscured behind a single fee displayed to you by dApps, there is actually a cost (a.k.a "rent") to opening and keeping open each token account:'," ","".concat(.00203928)," SOL. This sum is paid by ",Object(A.jsx)("span",{style:{fontWeight:"bold"},children:"you"})," and is locked in the account as long as it exists."," ",Object(A.jsx)("span",{className:e.highlightPrimary,children:"Closing the accounts is the only way to get them SOL back!"})]},1)}),Object(A.jsx)(m.a,{variant:"body1",children:Object(A.jsx)("li",{children:"Wallets can get cluttered fast, especially if you regularly buy/sell NFTs. A tidy wallet can prevent mistakes."},2)}),Object(A.jsx)(m.a,{variant:"body1",children:Object(A.jsx)("li",{children:"Potential ASMR substitute if watching videos of sand being cut is not enough anymore."},3)})]})})})]}),Object(A.jsxs)(Qt.a,{className:e.accordionItem,children:[Object(A.jsx)($t.a,{expandIcon:Object(A.jsx)(tn.a,{}),children:Object(A.jsx)(m.a,{variant:"h3",children:"Is it safe?"})}),Object(A.jsx)(en.a,{children:Object(A.jsx)("div",{className:e.accordionContent,children:Object(A.jsxs)(m.a,{variant:"body1",children:["Yes. Only empty accounts can be closed, and dApps handle accounts creation automatically whenever needed."," ",Object(A.jsx)("span",{className:e.highlightPrimary,children:"If they don't it is a bug."})]})})})]}),Object(A.jsxs)(Qt.a,{className:e.accordionItem,children:[Object(A.jsx)($t.a,{expandIcon:Object(A.jsx)(tn.a,{}),children:Object(A.jsx)(m.a,{variant:"h3",children:"Disclaimer"})}),Object(A.jsx)(en.a,{children:Object(A.jsx)("div",{className:e.accordionContent,children:Object(A.jsxs)(m.a,{variant:"body1",children:["You should always send funds directly from exchanges to your wallet address,"," ",Object(A.jsx)("span",{className:e.highlightPrimary,children:"not to the token account address"}),". Make sure you haven't saved a token account address rather than a wallet address"]})})})]})]})},sn=["7AF95zJCMQ1JNtkFJRuTiLhMc9xYeAyAHsBPgX8hXEmf","JA2Ay71w8McVD6DMH93qGqvzxZGVGn9ZnTW6U1F8UuK8","BzFPfRWV8fZcQkjTQDZDHwSL2hjWujo3L4NUWej7so4j","FGDSKx4QAfMhzWrBkte4Y3aXdQBpjGudHW5cbyiaGyxm","EExXV45jz4Eo64XCXQNTkf1idShiJVXSf4GVwB3BaET4"],on=function(e){var t=e.connection,n=e.publicKey,a=e.signTransaction,r=e.updateEmptyTokenAccountAddresses;return Object(A.jsx)(le.a,{variant:"contained",onClick:Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sn.map(function(){var e=Object(G.a)(W.a.mark((function e(r){var i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.Token.getAssociatedTokenAddress(Oe.ASSOCIATED_TOKEN_PROGRAM_ID,Oe.TOKEN_PROGRAM_ID,new U.c(r),n);case 2:return i=e.sent,e.next=5,t.getAccountInfo(i);case 5:if(null!==e.sent){e.next=9;break}return e.next=9,Object(V.b)(Object(G.a)(W.a.mark((function e(){var c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new U.g({feePayer:n})).add(Oe.Token.createAssociatedTokenAccountInstruction(Oe.ASSOCIATED_TOKEN_PROGRAM_ID,Oe.TOKEN_PROGRAM_ID,new U.c(r),i,n,n)),e.abrupt("return",nn(t,a,c));case 3:case"end":return e.stop()}}),e)}))),"Token account created!");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Object(M.d)(1e3);case 3:r();case 4:case"end":return e.stop()}}),e)}))),children:"Create ATAs"})},ln=function(){var e,t=Object(x.a)(Object(x.a)({},Se()),qt()),n=Object(h.d)().connection,r=Object(h.e)(),i=r.publicKey,c=r.signTransaction,s=Object(a.useState)([]),o=Object(f.a)(s,2),l=o[0],u=o[1],d=Object(a.useState)(""),p=Object(f.a)(d,2),j=p[0],O=p[1],g=Object(a.useState)(!1),v=Object(f.a)(g,2),y=v[0],w=v[1],S=Object(a.useState)(!1),N=Object(f.a)(S,2),C=N[0],T=N[1],I=Object(a.useCallback)((function(){if(i)return an(n,i).then(u);u([])}),[n,i,u]);Object(a.useEffect)((function(){I()}),[I]);var P=Object(a.useMemo)((function(){return l.slice(0,27)}),[l]);return Object(A.jsx)(se.a,{children:Object(A.jsxs)("div",{className:t.root,children:[Object(A.jsx)("div",{className:t.titleSection,children:Object(A.jsx)(m.a,{variant:"h1",children:"Wallet Cleanup Tool"})}),Object(A.jsxs)("div",{className:t.mainSection,children:[Object(A.jsx)("div",{className:t.descriptionSection,children:Object(A.jsx)(cn,{})}),Object(A.jsx)("div",{className:t.cleanupSection,children:Object(A.jsx)("div",{className:t.actionSection,children:i?Object(A.jsx)("div",{className:t.actionSectionInner,children:0===l.length?Object(A.jsxs)("div",{className:t.accountCount,children:[Object(A.jsxs)(m.a,{component:"div",children:["You have",Object(A.jsx)("span",{className:t.highlightPrimary,children:" 0 "}),"empty token accounts!"]}),Object(A.jsx)(k.a,{size:"small",className:t.refreshButtonContainer,onClick:function(){I()},children:Object(A.jsx)(_t.a,{className:t.refreshButton})})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:t.accountCount,children:[Object(A.jsxs)(m.a,{children:["You have",Object(A.jsxs)("span",{className:t.highlightPrimary,children:[" ",l.length," "]}),"empty token account(s)"]}),Object(A.jsx)(k.a,{size:"small",className:t.refreshButtonContainer,onClick:function(){I()},children:Object(A.jsx)(_t.a,{className:t.refreshButton})})]}),Object(A.jsx)(He,{height:"30px"}),Object(A.jsx)("div",{className:t.accountSelection,children:Object(A.jsxs)(ot.a,{label:"Token account",displayEmpty:!0,value:j,onChange:function(e){O(e.target.value)},MenuProps:{variant:"menu",getContentAnchorEl:null},children:[Object(A.jsx)(lt.a,{value:"",disabled:!0,children:"Select account to close"}),l.map((function(e){return Object(A.jsx)(lt.a,{value:e,children:Object(M.c)(new U.c(e))})}))]})}),Object(A.jsx)(le.a,{variant:"contained",className:"".concat(t.mainButton," ").concat(t.closeButton),disabled:!j||y||C,onClick:Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&0!==l.length&&c){e.next=2;break}return e.abrupt("return");case 2:return w(!0),e.next=5,Object(V.b)(Object(G.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new U.g({feePayer:i})).add(rn(new U.c(j),i)),e.abrupt("return",nn(n,c,t));case 3:case"end":return e.stop()}}),e)}))),"Token account closed!");case 5:return O(""),e.next=8,Object(M.d)(1e3);case 8:I(),w(!1);case 10:case"end":return e.stop()}}),e)}))),children:Object(A.jsx)("div",{className:t.purchaseButtonContent,children:y?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:t.purchaseButtonContentLeft,children:Object(A.jsx)(b.a,{size:20,className:t.purchaseSpinner})}),Object(A.jsx)("div",{className:t.purchaseButtonContentMiddle,children:"Processing..."}),Object(A.jsx)("div",{className:t.purchaseButtonContentRight})]}):Object(A.jsx)(A.Fragment,{children:"Close selected"})})}),Object(A.jsx)("div",{className:t.orDivider,children:Object(A.jsx)(m.a,{children:"or"})}),Object(A.jsx)(le.a,{variant:"contained",className:"".concat(t.mainButton," ").concat(t.closeButton),disabled:0===l.length||y||C,onClick:Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&c){e.next=2;break}return e.abrupt("return");case 2:return T(!0),e.next=5,Object(V.b)(Object(G.a)(W.a.mark((function e(){var t,a,r,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new U.g({feePayer:i}),a=Object(Jt.a)(P);try{for(a.s();!(r=a.n()).done;)s=r.value,t.add(rn(new U.c(s),i))}catch(o){a.e(o)}finally{a.f()}return e.abrupt("return",nn(n,c,t));case 4:case"end":return e.stop()}}),e)}))),"Token accounts closed!");case 5:return O(""),e.next=8,Object(M.d)(1e3);case 8:I(),T(!1);case 10:case"end":return e.stop()}}),e)}))),children:Object(A.jsx)("div",{className:t.purchaseButtonContent,children:C?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:t.purchaseButtonContentLeft,children:Object(A.jsx)(b.a,{size:20,className:t.purchaseSpinner})}),Object(A.jsx)("div",{className:t.purchaseButtonContentMiddle,children:"Processing..."}),Object(A.jsx)("div",{className:t.purchaseButtonContentRight})]}):Object(A.jsx)(A.Fragment,{children:(null!==(e=null===P||void 0===P?void 0:P.length)&&void 0!==e?e:0)<27?"Close all in one click":"Close 27 accounts at once (max)"})})})]})}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:t.actionTagline,children:Object(A.jsx)(m.a,{variant:"h3",className:t.highlightSecondary,children:"Connect your wallet to begin."})}),Object(A.jsx)(ye.b,{variant:"outlined",color:"secondary",className:"".concat(t.mainButton," ").concat(t.connectToBuyButton),children:"Connect"})]})})})]}),ee.b&&i&&c&&Object(A.jsx)(on,{connection:n,publicKey:i,signTransaction:c,updateEmptyTokenAccountAddresses:I})]})})},un=n(227),dn=new U.c("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),pn=function(e,t){return un.DexInstructions.closeOpenOrders({market:e.market,openOrders:e.address,owner:t,solWallet:t,programId:dn})},fn=function(e){var t=e.connection,n=e.publicKey,r=e.closableOpenOrders,i=e.signTransaction,c=e.update,s=Object(x.a)(Object(x.a)({},Se()),qt()),o=Object(a.useState)(!1),l=Object(f.a)(o,2),u=l[0],d=l[1],p=Object(a.useMemo)((function(){var e;return null!==(e=null===r||void 0===r?void 0:r.slice(0,13))&&void 0!==e?e:[]}),[r]);return void 0===r?Object(A.jsxs)("div",{className:s.accountCount,children:[Object(A.jsx)(b.a,{size:20,className:s.purchaseSpinner}),Object(A.jsx)(m.a,{children:" Loading..."})]}):0===r.length?Object(A.jsxs)("div",{className:s.accountCount,children:[Object(A.jsxs)(m.a,{component:"div",children:["You have",Object(A.jsx)("span",{className:s.highlightPrimary,children:" 0 "}),"closable Serum DEX accounts"]}),Object(A.jsx)(k.a,{size:"small",className:s.refreshButtonContainer,onClick:function(){c()}})]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:s.accountCount,children:Object(A.jsxs)(m.a,{children:["You have",Object(A.jsxs)("span",{className:s.highlightPrimary,children:[" ",r.length," "]}),"closable Serum DEX account(s)"]})}),Object(A.jsx)(He,{height:"30px"}),Object(A.jsx)("div",{className:s.accountSelection,children:Object(A.jsxs)(ot.a,{label:"Serum DEX account",value:"",displayEmpty:!0,MenuProps:{variant:"menu",getContentAnchorEl:null},children:[Object(A.jsx)(lt.a,{value:"",disabled:!0,children:"See Serum open orders account to close"}),r.map((function(e){return Object(A.jsx)(lt.a,{value:e.address.toBase58(),children:Object(M.c)(e.address)},e.address.toBase58())}))]})}),Object(A.jsx)(le.a,{variant:"contained",className:"".concat(s.mainButton," ").concat(s.closeButton),disabled:0===p.length||u,onClick:Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Object(V.b)(Object(G.a)(W.a.mark((function e(){var a,r,c,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new U.g({feePayer:n}),r=Object(Jt.a)(p);try{for(r.s();!(c=r.n()).done;)s=c.value,a.add(pn(s,n))}catch(o){r.e(o)}finally{r.f()}return e.abrupt("return",nn(t,i,a));case 4:case"end":return e.stop()}}),e)}))),"Serum DEX accounts closed!");case 3:return e.next=5,Object(M.d)(1e3);case 5:c(),d(!1);case 7:case"end":return e.stop()}}),e)}))),children:Object(A.jsx)("div",{className:s.purchaseButtonContent,children:u?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:s.purchaseButtonContentLeft,children:Object(A.jsx)(b.a,{size:20,className:s.purchaseSpinner})}),Object(A.jsx)("div",{className:s.purchaseButtonContentMiddle,children:"Processing..."}),Object(A.jsx)("div",{className:s.purchaseButtonContentRight})]}):Object(A.jsx)(A.Fragment,{children:r.length<=13?"Close all in one click":"Close ".concat(13," accounts at once (max)")})})})]})},mn=["77quYg4MGneUdjgXCunt9GgM1usmrxKY31twEy3WHwcS","9wFFyRfZBsuAha4YcuxcXLKwMxJR43S7fPfQLusDBzvT","ByRys5tuUWDgL73G8JBAEfkdFf8JWBzPBDHsBVQ5vbQA","6DgQRTpJTnAYBSShngAVZZDq7j9ogRN1GfSQ3cq9tubW","5WRoQxE59966N2XfD2wYy1uhuyKeoVJ9NBMH6r6RNYEF","C1EuT9VokAKLiW7i2ASnZUvxDoKuKkCpDDeNxAptuNe4","6fc7v3PmjZG9Lk2XTot6BywGyYLkBQuzuFKd4FpCsPxk","7nZP6feE94eAz9jmfakNJWPwEKaeezuKKC5D1vrnqyo2","DYfigimKWc5VhavR4moPBibx9sMcWYVSjVdWvPztBPTa","7dLVkUfBVfCGkFhSXDCq1ukM9usathSgS716t643iFGF","4tSvZvnbyzHXLMTiFonMyxZoHmFqau1XArcRCVHLZ5gX","E14BKBhDWD4EuTkWj1ooZezesGxMW8LPCps4W5PuzZJo","EbV7pPpEvheLizuYX3gUCvWM8iySbSRAhu2mQ5Vz2Mxf","2Pbh1CvRVku1TgewMfycemghf6sU9EyuFDcNXqvRmSxc","2Pbh1CvRVku1TgewMfycemghf6sU9EyuFDcNXqvRmSxc"],jn=function(e){var t=e.connection,n=e.publicKey,a=e.signTransaction,r=e.update;return Object(A.jsx)(le.a,{variant:"contained",onClick:Object(G.a)(W.a.mark((function e(){var i,c,s,o,l;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dn,c=un.OpenOrders.getLayout(i).span,e.next=4,t.getMinimumBalanceForRentExemption(c);case 4:s=e.sent,o=mn.slice(),l=W.a.mark((function e(){var r,l;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new U.g({feePayer:n}),l=o.splice(0,5).map((function(e){var t=new U.c(e),a=new U.b;return r.add(U.f.createAccount({fromPubkey:n,newAccountPubkey:a.publicKey,lamports:s,space:c,programId:i})),r.add(un.DexInstructions.initOpenOrders({market:t,openOrders:a.publicKey,owner:n,programId:i,marketAuthority:null})),a})),e.next=4,Object(V.b)(Object(G.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nn(t,a,r,l));case 1:case"end":return e.stop()}}),e)}))),"Serum open orders accounts created!");case 4:case"end":return e.stop()}}),e)}));case 7:if(!(o.length>0)){e.next=11;break}return e.delegateYield(l(),"t0",9);case 9:e.next=7;break;case 11:return e.next=13,Object(M.d)(1e3);case 13:r();case 14:case"end":return e.stop()}}),e)}))),children:"Create open orders accounts"})},bn=function(){var e=Object(x.a)(Object(x.a)({},Se()),qt()),t=Object(h.d)().connection,n=Object(h.e)(),r=n.publicKey,i=n.signTransaction,c=Object(a.useState)(),s=Object(f.a)(c,2),o=s[0],l=s[1];Object(a.useEffect)((function(){r?un.OpenOrders.findForOwner(t,r,dn).then((function(e){var t=e.filter((function(e){return e.baseTokenTotal.isZero()&&e.quoteTokenTotal.isZero()&&e.freeSlotBits.eq(new Lt.a("ffffffffffffffffffffffffffffffff",16))}));console.log(t.length),l(t)})):l(void 0)}),[t,r]);return Object(A.jsx)(se.a,{children:Object(A.jsxs)("div",{className:e.root,children:[Object(A.jsx)("div",{className:e.titleSection,children:Object(A.jsx)(m.a,{variant:"h1",children:"Close Serum DEX accounts"})}),Object(A.jsxs)("div",{className:e.mainSection,children:[Object(A.jsx)("div",{className:e.descriptionSection,children:Object(A.jsxs)(Qt.a,{defaultExpanded:!0,children:[Object(A.jsx)($t.a,{expandIcon:Object(A.jsx)(tn.a,{}),children:Object(A.jsx)(m.a,{variant:"h3",children:"What does it do?"})}),Object(A.jsx)(en.a,{children:Object(A.jsx)("div",{className:e.accordionContent,children:Object(A.jsxs)(m.a,{variant:"body1",children:["Serum DEX users need an open orders account for each market they interact with, this account is used by the Serum DEX smart contract to record user limit orders, fee accrued...",Object(A.jsx)("br",{}),'The "rent", 0.02335776 SOL, of each accounts can be recovered by closing them.']})})})]})}),Object(A.jsx)("div",{className:e.cleanupSection,children:Object(A.jsx)("div",{className:e.actionSection,children:r&&i?Object(A.jsx)(fn,{connection:t,publicKey:r,closableOpenOrders:o,signTransaction:i,update:function(){o&&0!==o.length?t.getMultipleAccountsInfo(o.map((function(e){return e.address}))).then((function(e){var t=e.reduce((function(e,t,n){return t&&e.push(o[n]),e}),new Array);l(t)})):l(null===o||void 0===o?void 0:o.slice())}}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:e.actionTagline,children:Object(A.jsx)(m.a,{variant:"h3",className:e.highlightSecondary,children:"Connect your wallet to begin."})}),Object(A.jsx)(ye.b,{variant:"outlined",color:"secondary",className:"".concat(e.mainButton," ").concat(e.connectToBuyButton),children:"Connect"})]})})})]}),ee.b&&r&&i&&Object(A.jsx)(jn,{connection:t,publicKey:r,signTransaction:i,update:function(){}})]})})},hn=function(){return Object(A.jsxs)(u.c,{children:[Object(A.jsx)(u.a,{path:"/",exact:!0,component:Bt}),Object(A.jsx)(u.a,{path:"".concat(d.a.RAFFLES,"/:id"),component:Ct}),Object(A.jsx)(u.a,{path:d.a.RAFFLES,exact:!0,component:je}),Object(A.jsx)(u.a,{path:d.a.STAKE,exact:!0,component:Et.a}),Object(A.jsx)(u.a,{path:d.a.TOOLS.HOME,exact:!0,component:Yt}),Object(A.jsx)(u.a,{path:d.a.TOOLS.CLOSE_TA,exact:!0,component:ln}),Object(A.jsx)(u.a,{path:d.a.TOOLS.CLOSE_SA,exact:!0,component:bn}),Object(A.jsx)(u.a,{path:d.a.ADMIN.HOME,exact:!0,component:Ut}),Object(A.jsx)(u.a,{path:"".concat(d.a.ADMIN.RAFFLES,"/:id"),exact:!0,component:Zt})]})},xn=n(820),On=n(487),gn="#e86bff",vn="#01ffa3",yn=function(e){var t=e.device;return Object(On.a)({typography:{allVariants:{color:"#FFF",fontFamily:"Roboto Mono"},h1:{color:gn,textAlign:"center",fontSize:t===K.a.Phone?"20px":"40px"},h2:{color:vn,fontWeight:"bold",fontSize:t===K.a.Phone?"18px":"25px"},h3:{color:vn,fontWeight:"bold",fontSize:t===K.a.Phone?"15px":"16px"},h4:{color:"white",fontSize:(K.a.Phone,"20px")},body1:{fontSize:(K.a.Phone,"14px")},overline:{color:"#999",fontSize:t===K.a.Phone?"12px":"13px"},caption:{fontSize:t===K.a.Phone?"16x":"16px"}},palette:{type:"dark",background:{paper:"#212225",default:"linear-gradient(0deg, rgba(57,9,74,1) 0%, rgba(6,18,98,1) 100%, rgba(57,9,74,1) 100%);"},primary:{main:gn},secondary:{main:vn},grey:{500:"#777"}}})},wn=function(e){var t=e.children,n=Object(E.a)().device;return Object(A.jsx)(xn.a,{theme:yn({device:n}),children:t})},kn=n(200);!function(e){e.Localnet="localnet"}(Rt||(Rt={}));var Sn=function(e){var t=e.children,n=Rt.Localnet,r=Object(a.useMemo)((function(){return function(e){return e===Rt.Localnet?"https://ssc-dao.genesysgo.net/":Object(U.h)(e)}(n)}),[n]),i=Object(a.useMemo)((function(){return[Object(kn.a)(),Object(kn.c)(),Object(kn.b)(),Object(kn.e)({network:n}),Object(kn.d)({network:n})]}),[n]),c=Object(a.useCallback)((function(e){l.b.error(e.message?"".concat(e.name,": ").concat(e.message):e.name),console.error(e)}),[]);return Object(A.jsx)(h.a,{endpoint:r,children:Object(A.jsx)(h.b,{wallets:i,onError:c,autoConnect:!0,children:Object(A.jsx)(ye.a,{featuredWallets:5,children:t})})})},Nn=n(800),Cn=n(821),Tn=Object(I.a)((function(e){return{root:function(e){var t=e.device;return{position:"fixed",bottom:t===K.a.Phone?20:30,right:t===K.a.Phone?20:30}},scrollButton:{color:e.palette.common.black,backgroundColor:e.palette.secondary.main,"&:hover":{boxShadow:"0px 0px 10px ".concat(e.palette.secondary.main,", inset 0px 0px 5px ").concat(e.palette.secondary.main),backgroundColor:e.palette.secondary.main}},scrollButtonIcon:{transform:"rotate(-90deg)"}}})),Mn=function(){var e=Object(E.a)().device,t=Tn({device:e}),n=Object(a.useState)(!1),r=Object(f.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){var e=function(){window.pageYOffset>100?c(!0):c(!1)};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}),[]),Object(A.jsx)("div",{className:t.root,children:Object(A.jsx)(Nn.a,{direction:"up",in:i,children:Object(A.jsx)(k.a,{size:"medium",className:t.scrollButton,onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},children:Object(A.jsx)(Cn.a,{className:t.scrollButtonIcon})})})})},In=(n(748),function(){return Object(A.jsxs)(K.c,{children:[Object(A.jsx)(s.a,{}),Object(A.jsx)(wn,{children:Object(A.jsx)(o.a,{children:Object(A.jsx)(Sn,{children:Object(A.jsx)(Y,{children:Object(A.jsxs)(ie,{children:[Object(A.jsx)(hn,{}),Object(A.jsx)(l.a,{position:"bottom-left",reverseOrder:!1,toastOptions:{duration:5e3}}),Object(A.jsx)(Mn,{})]})})})})})]})}),Pn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,830)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(In,{})}),document.getElementById("root")),Pn()},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var a=n(1),r=n.n(a),i=n(5),c=n(10),s=n(11),o=n(54),l=n(84),u=n(58),d=function(){function e(){Object(c.a)(this,e),this.publicKey=void 0}return Object(s.a)(e,[{key:"signTransaction",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),p=function(e,t){var n=new o.d(e,t||new d,{});return n.send=function(){var n=Object(i.a)(r.a.mark((function n(a,i,c){var s,o,l,d;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===i&&(i=[]),a.feePayer=null===t||void 0===t?void 0:t.publicKey,n.next=4,e.getRecentBlockhash();case 4:return a.recentBlockhash=n.sent.blockhash,n.next=7,null===t||void 0===t?void 0:t.signTransaction(a);case 7:return i.filter((function(e){return void 0!==e})).forEach((function(e){a.partialSign(e)})),s=a.serialize(),n.next=11,e.sendRawTransaction(s);case 11:o=n.sent,l=0;case 13:if(!(l<30)){n.next=24;break}return n.next=16,e.getSignatureStatus(o);case 16:if("confirmed"!==(null===(d=n.sent.value)||void 0===d?void 0:d.confirmationStatus)){n.next=19;break}return n.abrupt("break",24);case 19:return n.next=21,Object(u.d)(1e3);case 21:l++,n.next=13;break;case 24:return n.abrupt("return",o);case 25:case"end":return n.stop()}}),n)})));return function(e,t,a){return n.apply(this,arguments)}}(),n},f=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return a=e.sent,console.log("Success:",a),l.b.success(n),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.t0.msg?l.b.error("Transaction failed: ".concat(e.t0.msg)):l.b.error("Unexpected error"),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()},92:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a="So11111111111111111111111111111111111111112",r={So11111111111111111111111111111111111111112:{chainId:101,address:a,symbol:"SOL",name:"SOL",decimals:9,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",tags:[],extensions:{website:"https://solana.com/",serumV3Usdc:"9wFFyRfZBsuAha4YcuxcXLKwMxJR43S7fPfQLusDBzvT",serumV3Usdt:"HWHvQhFmJB3NUcu1aihKmrKegfVxBEHzwVX6yZCKEsi1",coingeckoId:"solana",imageURI:"/resources/solana-logo.gif"}},zRpVjG5wMWrNhpTtSiGMz9iBaMTQDdaVGCFLmYqCs4U:{chainId:101,address:"zRpVjG5wMWrNhpTtSiGMz9iBaMTQDdaVGCFLmYqCs4U",symbol:"TT",name:"TEST TOKEN",decimals:6,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/9nusLQeFKiocswDt6NQsiErm1M43H2b8x6v5onhivqKv/logo.png",tags:[],extensions:{website:"https://sollama.finance",twitter:"https://twitter.com/SollamaFinance"}},"72UgZ7avdJZBbv3wR7hbWcFy6dyHHNAoJw7CimGA55Zh":{chainId:101,address:"72UgZ7avdJZBbv3wR7hbWcFy6dyHHNAoJw7CimGA55Zh",symbol:"PM1",name:"USDT",decimals:2,logoURI:"".concat("https://draffle.ngrok.io","/tether-usdt-logo.png"),tags:[],extensions:{website:"https://sollama.finance",twitter:"https://twitter.com/SollamaFinance"}},H32RbcbAoskfMVyPSTNQucEkYP2qvYLkmDg5ij4cPBhH:{chainId:101,address:"H32RbcbAoskfMVyPSTNQucEkYP2qvYLkmDg5ij4cPBhH",symbol:"PM2",name:"Prize Mint 2",decimals:0,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/9nusLQeFKiocswDt6NQsiErm1M43H2b8x6v5onhivqKv/logo.png",tags:[],extensions:{website:"https://sollama.finance",twitter:"https://twitter.com/SollamaFinance"}},DCTo8EdRrycGpjRDntmdAMoaHdq77mQwdEchtoXAtje3:{chainId:101,address:"DCTo8EdRrycGpjRDntmdAMoaHdq77mQwdEchtoXAtje3",symbol:"DCT",name:"dRaffle Community Token",decimals:6,logoURI:"/dRaffle-logo.png",tags:[]},"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU":{chainId:101,address:"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU",symbol:"SAMO",name:"SAMO",decimals:9,logoURI:"/resources/samo-logo.png",tags:[]}},i=new Map(Object.entries(r)),c={chainId:101,symbol:"???",name:"Unkown token",decimals:0,logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/9nusLQeFKiocswDt6NQsiErm1M43H2b8x6v5onhivqKv/logo.png",tags:[],extensions:{}}}},[[749,1,2]]]);